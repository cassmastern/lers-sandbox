
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="https://cassmastern.github.io/cass-sandbox/sec_ehealth/sec_deepdive/eh-dd-03-fhir-resource-relationships/deepdive-fhir-resource-relationships/" rel="canonical"/>
<link href="../../eh-dd-02-fhir-data-fundamentals/" rel="prev"/>
<link href="../deepdive-fhir-resource-relationships-comprehensive/" rel="next"/>
<link href="../../../../img/favicon.ico" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.5.39" name="generator"/>
<title>FHIR Resource Relationships - Ler's Sandbox</title>
<link href="../../../../assets/stylesheets/main.8c3ca2c6.min.css" rel="stylesheet"/>
<link href="../../../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../../../css/alphabet.css" rel="stylesheet"/>
<link href="../../../../css/diagram-zoom.css" rel="stylesheet"/>
<link href="../../../../css/cm-logo.css" rel="stylesheet"/>
<link href="../../../../css/color-vars.css" rel="stylesheet"/>
<link href="../../../../css/custom-theme-colors.css" rel="stylesheet"/>
<link href="../../../../assets/mkdocs_puml/puml.css" rel="stylesheet"/>
<link href="../../../../assets/mkdocs_puml/interaction.css" rel="stylesheet"/>
<script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-GD2XWDMP2E"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-GD2XWDMP2E",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-GD2XWDMP2E",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
<script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script>
</head>
<body data-md-color-accent="custom" data-md-color-primary="custom" data-md-color-scheme="slate" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#fhir-resource-relationships">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Ler's Sandbox" class="md-header__button md-logo" data-md-component="logo" href="../../../.." title="Ler's Sandbox">
<img alt="logo" src="../../../../img/logo.svg"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Ler's Sandbox
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              FHIR Resource Relationships
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="custom" data-md-color-media="" data-md-color-primary="custom" data-md-color-scheme="slate" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="custom" data-md-color-media="" data-md-color-primary="custom" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<a aria-label="Share" class="md-search__icon md-icon" data-clipboard="" data-clipboard-text="" data-md-component="search-share" href="javascript:void(0)" tabindex="-1" title="Share">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"></path></svg>
</a>
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
<div class="md-search__suggest" data-md-component="search-suggest"></div>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Ler's Sandbox" class="md-nav__button md-logo" data-md-component="logo" href="../../../.." title="Ler's Sandbox">
<img alt="logo" src="../../../../img/logo.svg"/>
</a>
    Ler's Sandbox
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../..">
<span class="md-ellipsis">
    HOME
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../sec_about/">
<span class="md-ellipsis">
    ABOUT THIS WEBSITE
  </span>
</a>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            ABOUT THIS WEBSITE
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_about/whatsinhere/">
<span class="md-ellipsis">
    What's in Here?
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_about/roadmap/">
<span class="md-ellipsis">
    Roadmap &amp; Changelog
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_about/feedback/">
<span class="md-ellipsis">
    Feedback
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../sec_cloud/">
<span class="md-ellipsis">
    IN THE CLOUDS
  </span>
</a>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            IN THE CLOUDS
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_cloud/aws-gcp-azure/">
<span class="md-ellipsis">
    Architectures of AWS, GCP, and Azure
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_cloud/aws-gcp-azure_glossary/">
<span class="md-ellipsis">
    Cross-Platform Cloud &amp; DevOps Glossary (AWS, GCP, Azure)
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_cloud/aws-gcp-azure_glossary_enhanced/">
<span class="md-ellipsis">
    Cross-Platform Cloud &amp; DevOps Glossary (AWS, GCP, Azure) — Enhanced
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_cloud/jakarta-ee-azure/">
<span class="md-ellipsis">
    A Jakarta Enterprise Application on Azure
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../sec_accss/">
<span class="md-ellipsis">
    ACCESSIBILITY
  </span>
</a>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            ACCESSIBILITY
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_accss/accss_/">
<span class="md-ellipsis">
    Accessibility Reference
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_accss/visuals-for-the-sightless/">
<span class="md-ellipsis">
    Visuals for the Sightless
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_accss/accss_diagram-dilemma/">
<span class="md-ellipsis">
    The Diagramming Dilemma
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_accss/mermaid-beyond-reach/">
<span class="md-ellipsis">
    An Accessible Mermaid Beyond Reach
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_accss/mermaid-captured/">
<span class="md-ellipsis">
    Mermaid Captured
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_accss/mkdocs-mermaid-plantuml-graphviz/">
<span class="md-ellipsis">
    Diagram Accessibility: Current State/Path Forward
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../sec_freeform/">
<span class="md-ellipsis">
    CONCEPTS, ESSAYS, ETC.
  </span>
</a>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            CONCEPTS, ESSAYS, ETC.
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_freeform/ibm-sanfran/">
<span class="md-ellipsis">
    IBM SanFrancisco
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_freeform/ai-accessibility/">
<span class="md-ellipsis">
    Accessibility with AI
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_freeform/ai-accessibility_bus/">
<span class="md-ellipsis">
    Accessibility with AI (Concept Note)
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_freeform/gen-ai-landscape-primer/">
<span class="md-ellipsis">
    GenAI Landscape in 2025
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_freeform/identity/">
<span class="md-ellipsis">
    The Long Arc of Digital Identity
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../sec_net-sec/">
<span class="md-ellipsis">
    NETWORKS &amp; SECURITY
  </span>
</a>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            NETWORKS &amp; SECURITY
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_net-sec/network_data_center/">
<span class="md-ellipsis">
    A Hypothetical Data Centre Network
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_net-sec/network_data_center_stride/">
<span class="md-ellipsis">
    Network Security and Threat Modeling — STRIDE
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_net-sec/network_data_center_mitre/">
<span class="md-ellipsis">
    Network Security and Threat Modeling — MITRE ATT&amp;CK
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_net-sec/saml-admin/">
<span class="md-ellipsis">
    Single Sign-On (SSO) Admin Guide — SAML 2.0 Integration
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_7" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../">
<span class="md-ellipsis">
    eHEALTH
  </span>
</a>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
            eHEALTH
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_7_1" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../">
<span class="md-ellipsis">
    SMART-on-FHIR Deep Dive
  </span>
</a>
<label class="md-nav__link" for="__nav_7_1" id="__nav_7_1_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_7_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_7_1">
<span class="md-nav__icon md-icon"></span>
            SMART-on-FHIR Deep Dive
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7_1_1" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../eh-dd-01-foundations/">
<span class="md-ellipsis">
    An Introduction to FHIR
  </span>
</a>
<label class="md-nav__link" for="__nav_7_1_1" id="__nav_7_1_1_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_7_1_1_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_7_1_1">
<span class="md-nav__icon md-icon"></span>
            An Introduction to FHIR
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-01-foundations/deepdive-overview/">
<span class="md-ellipsis">
    Overview of SMART-on-FHIR
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-01-foundations/deepdive-overview-fhir-arch/">
<span class="md-ellipsis">
    SMART-on-FHIR Architecture Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-01-foundations/deepdive-overview-fhir-resources/">
<span class="md-ellipsis">
    Key FHIR Resources
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7_1_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../eh-dd-02-fhir-data-fundamentals/">
<span class="md-ellipsis">
    FHIR Data Fundamentals
  </span>
</a>
<label class="md-nav__link" for="__nav_7_1_2" id="__nav_7_1_2_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_7_1_2_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_7_1_2">
<span class="md-nav__icon md-icon"></span>
            FHIR Data Fundamentals
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-02-fhir-data-fundamentals/deepdive-fhir-data-types/">
<span class="md-ellipsis">
    FHIR Data Types
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-02-fhir-data-fundamentals/deepdive-fhir-code-systems/">
<span class="md-ellipsis">
    FHIR Terminology Standards
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-02-fhir-data-fundamentals/deepdive-fhir-cardinality/">
<span class="md-ellipsis">
    FHIR Resource Cardinality
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-02-fhir-data-fundamentals/deepdive-complete-resource-example/">
<span class="md-ellipsis">
    Complete FHIR Resource Example
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_7_1_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../">
<span class="md-ellipsis">
    FHIR Resource Relationships
  </span>
</a>
<label class="md-nav__link" for="__nav_7_1_3" id="__nav_7_1_3_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_7_1_3_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_7_1_3">
<span class="md-nav__icon md-icon"></span>
            FHIR Resource Relationships
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    FHIR Resource Relationships
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    FHIR Resource Relationships
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#understanding-the-web-of-healthcare-data">
<span class="md-ellipsis">
      Understanding the Web of Healthcare Data
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-core-relationship-references">
<span class="md-ellipsis">
      The Core Relationship: References
    </span>
</a>
<nav aria-label="The Core Relationship: References" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#reference-resolution">
<span class="md-ellipsis">
      Reference Resolution
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-relationship-map-by-domain">
<span class="md-ellipsis">
      The Relationship Map: By Domain
    </span>
</a>
<nav aria-label="The Relationship Map: By Domain" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#actors-and-identity">
<span class="md-ellipsis">
      Actors and Identity
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#clinical-domain">
<span class="md-ellipsis">
      Clinical Domain
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#medication-domain">
<span class="md-ellipsis">
      Medication Domain
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#care-planning-domain">
<span class="md-ellipsis">
      Care Planning Domain
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#documentation-domain">
<span class="md-ellipsis">
      Documentation Domain
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#scheduling-domain">
<span class="md-ellipsis">
      Scheduling Domain
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#financial-domain">
<span class="md-ellipsis">
      Financial Domain
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-comprehensive-relationship-diagram">
<span class="md-ellipsis">
      The Comprehensive Relationship Diagram
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#practical-traversal-patterns">
<span class="md-ellipsis">
      Practical Traversal Patterns
    </span>
</a>
<nav aria-label="Practical Traversal Patterns" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#pattern-1-patient-centric-view">
<span class="md-ellipsis">
      Pattern 1: Patient-Centric View
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pattern-2-encounter-centric-view">
<span class="md-ellipsis">
      Pattern 2: Encounter-Centric View
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pattern-3-condition-centric-view">
<span class="md-ellipsis">
      Pattern 3: Condition-Centric View
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pattern-4-medication-lifecycle-trace">
<span class="md-ellipsis">
      Pattern 4: Medication Lifecycle Trace
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pattern-5-diagnostic-report-expansion">
<span class="md-ellipsis">
      Pattern 5: Diagnostic Report Expansion
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#reference-integrity-and-error-handling">
<span class="md-ellipsis">
      Reference Integrity and Error Handling
    </span>
</a>
<nav aria-label="Reference Integrity and Error Handling" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#broken-references">
<span class="md-ellipsis">
      Broken References
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#contained-resources-when-to-use">
<span class="md-ellipsis">
      Contained Resources: When to Use
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#circular-references-and-infinite-loops">
<span class="md-ellipsis">
      Circular References and Infinite Loops
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#next-steps">
<span class="md-ellipsis">
      Next Steps
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../deepdive-fhir-resource-relationships-comprehensive/">
<span class="md-ellipsis">
    FHIR Comprehensive Resource Relationships
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../deepdive-fhir-resource-bundles/">
<span class="md-ellipsis">
    FHIR Resource Bundles
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7_1_4" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../eh-dd-04-working-with-fhir-apis/">
<span class="md-ellipsis">
    FHIR Resource APIs
  </span>
</a>
<label class="md-nav__link" for="__nav_7_1_4" id="__nav_7_1_4_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_7_1_4_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_7_1_4">
<span class="md-nav__icon md-icon"></span>
            FHIR Resource APIs
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-04-working-with-fhir-apis/deepdive-fhir-rest-common-ops/">
<span class="md-ellipsis">
    Common FHIR REST Operations
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-04-working-with-fhir-apis/deepdive-fhir-search-parameters/">
<span class="md-ellipsis">
    FHIR Search Parameters
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-04-working-with-fhir-apis/deepdive-error-handling/">
<span class="md-ellipsis">
    Error Handling and OperationOutcome
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-04-working-with-fhir-apis/deepdive-fhir-validation/">
<span class="md-ellipsis">
    FHIR Validation
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7_1_5" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../eh-dd-05-advanced-fhir-concepts/">
<span class="md-ellipsis">
    Advanced FHIR Concepts
  </span>
</a>
<label class="md-nav__link" for="__nav_7_1_5" id="__nav_7_1_5_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_7_1_5_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_7_1_5">
<span class="md-nav__icon md-icon"></span>
            Advanced FHIR Concepts
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-05-advanced-fhir-concepts/deepdive-fhir-profiles-and-extensions/">
<span class="md-ellipsis">
    FHIR Profiles and Extensions
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7_1_6" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../eh-dd-06-smart-auth/">
<span class="md-ellipsis">
    SMART Authorization
  </span>
</a>
<label class="md-nav__link" for="__nav_7_1_6" id="__nav_7_1_6_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_7_1_6_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_7_1_6">
<span class="md-nav__icon md-icon"></span>
            SMART Authorization
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-06-smart-auth/deepdive-oauth-flow/">
<span class="md-ellipsis">
    OAuth 2.0 Flow
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-06-smart-auth/deepdive-smart-launch-flow/">
<span class="md-ellipsis">
    SMART Launch Flow
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-06-smart-auth/deepdive-smart-scopes-and-auth/">
<span class="md-ellipsis">
    SMART Scopes and Authorization
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-06-smart-auth/deepdive-smart-config-discovery/">
<span class="md-ellipsis">
    SMART Configuration Discovery
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-06-smart-auth/deepdive-security-and-access-control/">
<span class="md-ellipsis">
    Security and Access Control
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7_1_7" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../eh-dd-07-hands-on-practice/">
<span class="md-ellipsis">
    Hands-On
  </span>
</a>
<label class="md-nav__link" for="__nav_7_1_7" id="__nav_7_1_7_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_7_1_7_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_7_1_7">
<span class="md-nav__icon md-icon"></span>
            Hands-On
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-07-hands-on-practice/deepdive-smart-health-it-sandbox/">
<span class="md-ellipsis">
    Using the SMART Health IT Sandbox
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-07-hands-on-practice/deepdive-smart_client_impl-sample-app/">
<span class="md-ellipsis">
    Practical Example: Building a SMART App
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-07-hands-on-practice/deepdive-smart_client_impl/">
<span class="md-ellipsis">
    SMART Client Implementation (Python)
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-07-hands-on-practice/deepdive-smart_client_impl-practical-code-examples/">
<span class="md-ellipsis">
    Practical Code Examples
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-07-hands-on-practice/deepdive-testing-and-debugging/">
<span class="md-ellipsis">
    Testing and Debugging
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7_1_8" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../eh-dd-08-wrap-up/">
<span class="md-ellipsis">
    Wrap-Up
  </span>
</a>
<label class="md-nav__link" for="__nav_7_1_8" id="__nav_7_1_8_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_7_1_8_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_7_1_8">
<span class="md-nav__icon md-icon"></span>
            Wrap-Up
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-08-wrap-up/deepdive-key-takeaways/">
<span class="md-ellipsis">
    Deepdive key takeaways
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-08-wrap-up/deepdive-summary/">
<span class="md-ellipsis">
    Summary
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../sec_integration/">
<span class="md-ellipsis">
    SMART-on-FHIR Integration
  </span>
</a>
<label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_7_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_7_2">
<span class="md-nav__icon md-icon"></span>
            SMART-on-FHIR Integration
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../sec_integration/quick_ref/">
<span class="md-ellipsis">
    SMART-on-FHIR and Integration Quick Reference
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../sec_integration/smart-fhir-visuals/">
<span class="md-ellipsis">
    SMART-on-FHIR and Integration — Visuals
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../sec_integration/gloss_ontario_halo/">
<span class="md-ellipsis">
    Ontario eHealth &amp; HALO Integration Glossary
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../sec_api/">
<span class="md-ellipsis">
    API DOCUMENTATION
  </span>
</a>
<label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
            API DOCUMENTATION
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8_1" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../sec_api/sec_api_countries/">
<span class="md-ellipsis">
    COUNTRIES REST API
  </span>
</a>
<label class="md-nav__link" for="__nav_8_1" id="__nav_8_1_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_8_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_8_1">
<span class="md-nav__icon md-icon"></span>
            COUNTRIES REST API
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_api/sec_api_countries/api-countries-overview/">
<span class="md-ellipsis">
    Overview
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8_1_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../sec_api/sec_api_countries/sec_api_countries_guides/">
<span class="md-ellipsis">
    Guides
  </span>
</a>
<label class="md-nav__link" for="__nav_8_1_2" id="__nav_8_1_2_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_8_1_2_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_8_1_2">
<span class="md-nav__icon md-icon"></span>
            Guides
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_api/sec_api_countries/sec_api_countries_guides/api-countries-guides-quickstart/">
<span class="md-ellipsis">
    Quick Start Guide
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_api/sec_api_countries/sec_api_countries_guides/api-countries-guides-filtering/">
<span class="md-ellipsis">
    Advanced Filtering
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_api/sec_api_countries/sec_api_countries_guides/api-countries-guides-integration/">
<span class="md-ellipsis">
    Integration Patterns
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8_1_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../sec_api/sec_api_countries/sec_api_countries_examples/">
<span class="md-ellipsis">
    Examples
  </span>
</a>
<label class="md-nav__link" for="__nav_8_1_3" id="__nav_8_1_3_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_8_1_3_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_8_1_3">
<span class="md-nav__icon md-icon"></span>
            Examples
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_api/sec_api_countries/sec_api_countries_examples/api-countries-examples-javascript/">
<span class="md-ellipsis">
    JavaScript Examples
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_api/sec_api_countries/sec_api_countries_examples/api-countries-examples-python/">
<span class="md-ellipsis">
    Python Examples
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_api/sec_api_countries/sec_api_countries_examples/api-countries-examples-usecases/">
<span class="md-ellipsis">
    Real-World Use Cases
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_api/sec_api_countries/reference/">
<span class="md-ellipsis">
    Interactive OpenAPI (Swagger) Reference
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_api/sec_api_countries/resources/">
<span class="md-ellipsis">
    Resources &amp; Support
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../sec_api/sec_api_stripe/">
<span class="md-ellipsis">
    STRIPE PAYMENT API
  </span>
</a>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_8_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_8_2">
<span class="md-nav__icon md-icon"></span>
            STRIPE PAYMENT API
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_9" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../sec_cheatsheets/">
<span class="md-ellipsis">
    CHEAT SHEETS
  </span>
</a>
<label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_9_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_9">
<span class="md-nav__icon md-icon"></span>
            CHEAT SHEETS
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_cheatsheets/cheatsheet-docker/">
<span class="md-ellipsis">
    Docker Command Cheatsheet
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_cheatsheets/cheatsheet-kubectl/">
<span class="md-ellipsis">
    Kubectl Command Cheat Sheet
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_cheatsheets/cheatsheet_compound-modifiers/">
<span class="md-ellipsis">
    Compound Modifiers Cheat Sheet
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_10" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../sec_gloss/">
<span class="md-ellipsis">
    GLOSSARIES
  </span>
</a>
<label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_10_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_10">
<span class="md-nav__icon md-icon"></span>
            GLOSSARIES
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_gloss/gloss_oss/">
<span class="md-ellipsis">
    Glossary of OSS Terms
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_gloss/gloss_networking/">
<span class="md-ellipsis">
    Glossary of Networking Terms
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_gloss/gloss_kuber/">
<span class="md-ellipsis">
    Glossary of Kubernetes Terms
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_gloss/gloss_cloud-native/">
<span class="md-ellipsis">
    Glossary of Cloud-Native Terms
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_11" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../sec__sandbox/">
<span class="md-ellipsis">
    Sec  sandbox
  </span>
</a>
<label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_11_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_11">
<span class="md-nav__icon md-icon"></span>
            Sec  sandbox
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec__sandbox/dia-graphviz/">
<span class="md-ellipsis">
    Graphviz Diagrams
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec__sandbox/dia-mermaid/">
<span class="md-ellipsis">
    Mermaid Diagrams
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec__sandbox/dia-plantuml/">
<span class="md-ellipsis">
    PlantUML Diagrams
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec__sandbox/md-extensions/">
<span class="md-ellipsis">
    Markdown Extensions
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec__sandbox/dia-three-in-one/">
<span class="md-ellipsis">
    Three Diagrams in One Markdown
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#understanding-the-web-of-healthcare-data">
<span class="md-ellipsis">
      Understanding the Web of Healthcare Data
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-core-relationship-references">
<span class="md-ellipsis">
      The Core Relationship: References
    </span>
</a>
<nav aria-label="The Core Relationship: References" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#reference-resolution">
<span class="md-ellipsis">
      Reference Resolution
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-relationship-map-by-domain">
<span class="md-ellipsis">
      The Relationship Map: By Domain
    </span>
</a>
<nav aria-label="The Relationship Map: By Domain" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#actors-and-identity">
<span class="md-ellipsis">
      Actors and Identity
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#clinical-domain">
<span class="md-ellipsis">
      Clinical Domain
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#medication-domain">
<span class="md-ellipsis">
      Medication Domain
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#care-planning-domain">
<span class="md-ellipsis">
      Care Planning Domain
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#documentation-domain">
<span class="md-ellipsis">
      Documentation Domain
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#scheduling-domain">
<span class="md-ellipsis">
      Scheduling Domain
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#financial-domain">
<span class="md-ellipsis">
      Financial Domain
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-comprehensive-relationship-diagram">
<span class="md-ellipsis">
      The Comprehensive Relationship Diagram
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#practical-traversal-patterns">
<span class="md-ellipsis">
      Practical Traversal Patterns
    </span>
</a>
<nav aria-label="Practical Traversal Patterns" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#pattern-1-patient-centric-view">
<span class="md-ellipsis">
      Pattern 1: Patient-Centric View
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pattern-2-encounter-centric-view">
<span class="md-ellipsis">
      Pattern 2: Encounter-Centric View
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pattern-3-condition-centric-view">
<span class="md-ellipsis">
      Pattern 3: Condition-Centric View
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pattern-4-medication-lifecycle-trace">
<span class="md-ellipsis">
      Pattern 4: Medication Lifecycle Trace
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pattern-5-diagnostic-report-expansion">
<span class="md-ellipsis">
      Pattern 5: Diagnostic Report Expansion
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#reference-integrity-and-error-handling">
<span class="md-ellipsis">
      Reference Integrity and Error Handling
    </span>
</a>
<nav aria-label="Reference Integrity and Error Handling" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#broken-references">
<span class="md-ellipsis">
      Broken References
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#contained-resources-when-to-use">
<span class="md-ellipsis">
      Contained Resources: When to Use
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#circular-references-and-infinite-loops">
<span class="md-ellipsis">
      Circular References and Infinite Loops
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#next-steps">
<span class="md-ellipsis">
      Next Steps
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="fhir-resource-relationships">FHIR Resource Relationships</h1>
<h2 id="understanding-the-web-of-healthcare-data">Understanding the Web of Healthcare Data</h2>
<p>In FHIR, no resource stands alone. A patient's health story emerges from the connections between resources—Observations linked to Encounters, MedicationRequests justified by Conditions, DiagnosticReports containing multiple Observations. Understanding these relationships is crucial for building apps that present complete, contextualized clinical information.</p>
<p>Think of FHIR resources as nodes in a graph. The edges (references) between them create meaning:</p>
<ul>
<li>A blood pressure reading without a patient reference is meaningless data</li>
<li>A diagnosis without supporting observations lacks clinical justification</li>
<li>A medication order without an encounter context can't be billed properly</li>
</ul>
<p>This section explores how resources connect and why those connections matter.</p>
<hr/>
<h2 id="the-core-relationship-references">The Core Relationship: References</h2>
<p>Every significant relationship in FHIR uses the <strong>Reference</strong> data type. A Reference is a pointer from one resource to another, like a hyperlink:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"subject"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patient/smart-1288992"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Amy V. Shaw"</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Anatomy of a Reference</strong>:</p>
<ul>
<li><strong><code>reference</code></strong>: The URL or logical ID of the target resource</li>
<li><strong><code>type</code></strong>: Resource type (optional but recommended for validation)</li>
<li><strong><code>identifier</code></strong>: Business identifier as fallback (when you don't know the server ID)</li>
<li><strong><code>display</code></strong>: Human-readable description (helps with debugging and logs)</li>
</ul>
<h3 id="reference-resolution">Reference Resolution</h3>
<p>When your app encounters a reference, you can:</p>
<p><strong>1. Follow it immediately</strong> (eager loading):</p>
<div class="highlight"><pre><span></span><code><span class="err">GET /Observation/bp-20241101</span>
</code></pre></div>
<p>Response includes <code>subject.reference: "Patient/smart-1288992"</code>. Then fetch:</p>
<div class="highlight"><pre><span></span><code><span class="err">GET /Patient/smart-1288992</span>
</code></pre></div>
<p><strong>2. Use <code>_include</code> to get both at once</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="err">GET /Observation/bp-20241101?_include=Observation:subject</span>
</code></pre></div>
<p>Returns a Bundle with both Observation and Patient.</p>
<p><strong>3. Use <code>_revinclude</code> to traverse backwards</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="err">GET /Patient/smart-1288992?_revinclude=Observation:patient</span>
</code></pre></div>
<p>Returns Patient plus all Observations referencing that patient.</p>
<hr/>
<h2 id="the-relationship-map-by-domain">The Relationship Map: By Domain</h2>
<p>Let's explore some key resource relationships by domain.</p>
<h3 id="actors-and-identity">Actors and Identity</h3>
<p><span class="graphviz-light-dark" data-dark="#ffffff" data-default="#789abc" data-library-default="#789abc" data-light="#000000"></span><svg class="graphviz dot" height="174pt" viewbox="0.00 0.00 522.87 174.00" width="523pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g class="graph" id="graph0" transform="scale(1 1) rotate(0) translate(4 170)"><title>actors</title><polygon fill="transparent" points="-4,4 -4,-170 518.87,-170 518.87,4 -4,4" stroke="transparent"></polygon><!-- Patient --><g class="node" id="node1"><title>Patient</title><ellipse cx="427.78" cy="-148" fill="none" rx="44.39" ry="18" stroke="#777777"></ellipse><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="427.78" y="-144.3">Patient</text></g><!-- Practitioner --><g class="node" id="node2"><title>Practitioner</title><ellipse cx="70.84" cy="-72" fill="none" rx="66.09" ry="18" stroke="#777777"></ellipse><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="70.84" y="-68.3">Practitioner</text></g><!-- PractitionerRole --><g class="node" id="node3"><title>PractitionerRole</title><ellipse cx="427.78" cy="-72" fill="none" rx="87.18" ry="18" stroke="#777777"></ellipse><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="427.78" y="-68.3">PractitionerRole</text></g><!-- Practitioner&#45;&gt;PractitionerRole --><g class="edge" id="edge1"><title>Practitioner-&gt;PractitionerRole</title><path d="M137.36,-72C191.53,-72 269.22,-72 330.48,-72" fill="none" stroke="#777777"></path><polygon fill="#777777" points="330.55,-75.5 340.55,-72 330.55,-68.5 330.55,-75.5" stroke="#777777"></polygon><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="241.19" y="-75.8">practitioner</text></g><!-- Organization --><g class="node" id="node4"><title>Organization</title><ellipse cx="70.84" cy="-137" fill="none" rx="70.69" ry="18" stroke="#777777"></ellipse><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="70.84" y="-133.3">Organization</text></g><!-- Organization&#45;&gt;Patient --><g class="edge" id="edge4"><title>Organization-&gt;Patient</title><path d="M141.54,-139.16C209.49,-141.27 311.34,-144.42 373.18,-146.34" fill="none" stroke="#777777"></path><polygon fill="#777777" points="373.39,-149.85 383.49,-146.66 373.61,-142.85 373.39,-149.85" stroke="#777777"></polygon><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="241.19" y="-147.8">managingOrganization</text></g><!-- Organization&#45;&gt;PractitionerRole --><g class="edge" id="edge2"><title>Organization-&gt;PractitionerRole</title><path d="M127.59,-126.1C138.24,-124.05 149.3,-121.94 159.69,-120 224.08,-107.98 297.31,-94.86 350.79,-85.38" fill="none" stroke="#777777"></path><polygon fill="#777777" points="351.64,-88.78 360.88,-83.59 350.42,-81.89 351.64,-88.78" stroke="#777777"></polygon><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="241.19" y="-123.8">organization</text></g><!-- Location --><g class="node" id="node5"><title>Location</title><ellipse cx="70.84" cy="-18" fill="none" rx="50.09" ry="18" stroke="#777777"></ellipse><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="70.84" y="-14.3">Location</text></g><!-- Location&#45;&gt;PractitionerRole --><g class="edge" id="edge3"><title>Location-&gt;PractitionerRole</title><path d="M118.16,-23.87C168.57,-30.4 251.49,-41.54 322.69,-53 332.48,-54.58 342.77,-56.33 352.92,-58.12" fill="none" stroke="#777777"></path><polygon fill="#777777" points="352.54,-61.61 363,-59.92 353.77,-54.72 352.54,-61.61" stroke="#777777"></polygon><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="241.19" y="-56.8">location</text></g></g></svg></p>
<p><strong>What this means clinically</strong>:</p>
<p><strong>PractitionerRole is the hub</strong>: It's not enough to know "Dr. Johnson" exists. You need to know:</p>
<ul>
<li>Where does she work? (Organization: "Main Street Clinic")</li>
<li>What's her role? (PractitionerRole.code: "Internal Medicine Physician")</li>
<li>When is she available? (PractitionerRole.availableTime)</li>
<li>Where does she see patients? (Location: "Room 3")</li>
</ul>
<p>A single Practitioner can have multiple PractitionerRoles:</p>
<ul>
<li>Dr. Johnson works at Main Street Clinic (Monday–Wednesday)</li>
<li>Dr. Johnson also covers at County Hospital ER (Thursday–Friday)</li>
<li>Different Organizations, Locations, and specialties—same person</li>
</ul>
<p><strong>Patient.managingOrganization</strong>: Which organization "owns" this patient record? Crucial for:</p>
<ul>
<li>Data access control (Organization A can't see Organization B's patients)</li>
<li>Transfer of care (when patient moves to new provider)</li>
<li>Billing (who gets reimbursed for care?)</li>
</ul>
<p><strong>Real-world example</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Encounter"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"subject"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patient/smart-1288992"</span><span class="p">},</span>
<span class="w">  </span><span class="nt">"participant"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">    </span><span class="nt">"individual"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PractitionerRole/dr-johnson-main-clinic"</span><span class="p">}</span>
<span class="w">  </span><span class="p">}]</span>
<span class="p">}</span>
</code></pre></div>
<p>Fetching <code>PractitionerRole/dr-johnson-main-clinic</code> reveals:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PractitionerRole"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"practitioner"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Practitioner/dr-johnson"</span><span class="p">},</span>
<span class="w">  </span><span class="nt">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Organization/main-street-clinic"</span><span class="p">},</span>
<span class="w">  </span><span class="nt">"location"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Location/room-3"</span><span class="p">}],</span>
<span class="w">  </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">    </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">      </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://snomed.info/sct"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"309343006"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Physician"</span>
<span class="w">    </span><span class="p">}]</span>
<span class="w">  </span><span class="p">}],</span>
<span class="w">  </span><span class="nt">"specialty"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">    </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">      </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://snomed.info/sct"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"419192003"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Internal medicine"</span>
<span class="w">    </span><span class="p">}]</span>
<span class="w">  </span><span class="p">}]</span>
<span class="p">}</span>
</code></pre></div>
<p>Now you know WHO saw the patient, WHERE, and in WHAT CAPACITY.</p>
<hr/>
<h3 id="clinical-domain">Clinical Domain</h3>
<p><span class="graphviz-light-dark" data-dark="#ffffff" data-default="#789abc" data-library-default="#789abc" data-light="#000000"></span><svg class="graphviz dot" height="203pt" viewbox="0.00 0.00 657.76 203.00" width="658pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g class="graph" id="graph0" transform="scale(1 1) rotate(0) translate(4 199)"><title>clinical</title><polygon fill="transparent" points="-4,4 -4,-199 653.76,-199 653.76,4 -4,4" stroke="transparent"></polygon><!-- Encounter --><g class="node" id="node1"><title>Encounter</title><ellipse cx="59.14" cy="-99" fill="none" rx="59.29" ry="18" stroke="#777777"></ellipse><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="59.14" y="-95.3">Encounter</text></g><!-- Condition --><g class="node" id="node2"><title>Condition</title><ellipse cx="318.93" cy="-177" fill="none" rx="55.79" ry="18" stroke="#777777"></ellipse><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="318.93" y="-173.3">Condition</text></g><!-- Encounter&#45;&gt;Condition --><g class="edge" id="edge1"><title>Encounter-&gt;Condition</title><path d="M85.69,-115.2C100.08,-123.68 118.64,-133.61 136.29,-140 174.98,-154.01 220.35,-163.26 256.06,-169" fill="none" stroke="#777777"></path><polygon fill="#777777" points="255.92,-172.52 266.33,-170.6 256.99,-165.61 255.92,-172.52" stroke="#777777"></polygon><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="172.79" y="-162.8">encounter</text></g><!-- Observation --><g class="node" id="node3"><title>Observation</title><ellipse cx="582.17" cy="-126" fill="none" rx="67.69" ry="18" stroke="#777777"></ellipse><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="582.17" y="-122.3">Observation</text></g><!-- Encounter&#45;&gt;Observation --><g class="edge" id="edge2"><title>Encounter-&gt;Observation</title><path d="M112.08,-107.26C120.17,-108.33 128.44,-109.29 136.29,-110 264.94,-121.57 415.23,-124.85 504.07,-125.74" fill="none" stroke="#777777"></path><polygon fill="#777777" points="504.29,-129.24 514.32,-125.83 504.36,-122.24 504.29,-129.24" stroke="#777777"></polygon><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="318.93" y="-127.8">encounter</text></g><!-- Procedure --><g class="node" id="node4"><title>Procedure</title><ellipse cx="318.93" cy="-72" fill="none" rx="58.49" ry="18" stroke="#777777"></ellipse><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="318.93" y="-68.3">Procedure</text></g><!-- Encounter&#45;&gt;Procedure --><g class="edge" id="edge3"><title>Encounter-&gt;Procedure</title><path d="M115.45,-93.21C155.85,-88.98 210.76,-83.22 253.21,-78.78" fill="none" stroke="#777777"></path><polygon fill="#777777" points="253.58,-82.26 263.16,-77.74 252.85,-75.3 253.58,-82.26" stroke="#777777"></polygon><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="172.79" y="-94.8">encounter</text></g><!-- DiagnosticReport --><g class="node" id="node5"><title>DiagnosticReport</title><ellipse cx="318.93" cy="-18" fill="none" rx="91.78" ry="18" stroke="#777777"></ellipse><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="318.93" y="-14.3">DiagnosticReport</text></g><!-- Encounter&#45;&gt;DiagnosticReport --><g class="edge" id="edge4"><title>Encounter-&gt;DiagnosticReport</title><path d="M90.37,-83.56C104.13,-76.93 120.79,-69.47 136.29,-64 171.32,-51.63 211.23,-41.15 244.71,-33.32" fill="none" stroke="#777777"></path><polygon fill="#777777" points="245.92,-36.64 254.88,-30.98 244.35,-29.81 245.92,-36.64" stroke="#777777"></polygon><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="172.79" y="-67.8">encounter</text></g><!-- Condition&#45;&gt;Observation --><g class="edge" id="edge7"><title>Condition-&gt;Observation</title><path d="M367.24,-167.76C409.16,-159.58 470.72,-147.56 517.05,-138.52" fill="none" stroke="#777777"></path><polygon fill="#777777" points="517.85,-141.93 526.99,-136.58 516.51,-135.06 517.85,-141.93" stroke="#777777"></polygon><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="462.57" y="-157.8">evidence</text></g><!-- DiagnosticReport&#45;&gt;Observation --><g class="edge" id="edge5"><title>DiagnosticReport-&gt;Observation</title><path d="M373.59,-32.5C385.87,-36.22 398.77,-40.47 410.57,-45 456.74,-62.72 507.72,-87.67 541.82,-105.19" fill="none" stroke="#777777"></path><polygon fill="#777777" points="540.48,-108.44 550.97,-109.92 543.69,-102.22 540.48,-108.44" stroke="#777777"></polygon><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="462.57" y="-85.8">result</text></g><!-- Specimen --><g class="node" id="node6"><title>Specimen</title><ellipse cx="582.17" cy="-18" fill="none" rx="55.79" ry="18" stroke="#777777"></ellipse><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="582.17" y="-14.3">Specimen</text></g><!-- DiagnosticReport&#45;&gt;Specimen --><g class="edge" id="edge6"><title>DiagnosticReport-&gt;Specimen</title><path d="M410.93,-18C445.61,-18 484.41,-18 516.19,-18" fill="none" stroke="#777777"></path><polygon fill="#777777" points="516.25,-21.5 526.25,-18 516.25,-14.5 516.25,-21.5" stroke="#777777"></polygon><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="462.57" y="-21.8">specimen</text></g></g></svg></p>
<p><strong>What this means clinically</strong>:</p>
<p><strong>Encounter is the temporal spine</strong>: Most clinical resources reference the Encounter where they occurred. This enables:</p>
<ul>
<li><strong>Chart review</strong>: "Show me everything from the Nov 1 visit"</li>
<li><strong>Billing</strong>: Link charges to specific visit</li>
<li><strong>Care coordination</strong>: Alert primary care when specialist encounter occurs</li>
<li><strong>Quality measures</strong>: "Was HbA1c checked during diabetes follow-up?"</li>
</ul>
<p><strong>DiagnosticReport aggregates Observations</strong>: A "Complete Blood Count" DiagnosticReport contains multiple Observation results:</p>
<ul>
<li>White blood cell count</li>
<li>Red blood cell count</li>
<li>Hemoglobin</li>
<li>Hematocrit</li>
<li>Platelet count</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DiagnosticReport"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">      </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://loinc.org"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"58410-2"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Complete blood count"</span>
<span class="w">    </span><span class="p">}]</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Observation/wbc-count"</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Observation/rbc-count"</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Observation/hemoglobin"</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Observation/hematocrit"</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Observation/platelet-count"</span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p>Apps can display the report as a panel, grouping related results.</p>
<p><strong>Condition.evidence links to supporting Observations</strong>: A diabetes diagnosis (Condition) should reference the HbA1c result (Observation) that confirmed it:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Condition"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">      </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://snomed.info/sct"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"44054006"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Type 2 diabetes mellitus"</span>
<span class="w">    </span><span class="p">}]</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">"evidence"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">    </span><span class="nt">"detail"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">      </span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Observation/hba1c-20190315"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HbA1c 7.2%"</span>
<span class="w">    </span><span class="p">}]</span>
<span class="w">  </span><span class="p">}]</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Why it matters</strong>:</p>
<ul>
<li>Clinical decision support can verify diagnosis before triggering alerts</li>
<li>Quality measures require documented evidence (not just assertion)</li>
<li>Malpractice defense: "How did you diagnose this?" → "Based on these lab results"</li>
</ul>
<hr/>
<h3 id="medication-domain">Medication Domain</h3>
<p><span class="graphviz-light-dark" data-dark="#ffffff" data-default="#789abc" data-library-default="#789abc" data-light="#000000"></span><svg class="graphviz dot" height="221pt" viewbox="0.00 0.00 919.15 220.87" width="919pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g class="graph" id="graph0" transform="scale(1 1) rotate(0) translate(4 216.87)"><title>medication</title><polygon fill="transparent" points="-4,4 -4,-216.87 915.15,-216.87 915.15,4 -4,4" stroke="transparent"></polygon><!-- MedicationRequest --><g class="node" id="node1"><title>MedicationRequest</title><ellipse cx="570.62" cy="-51.87" fill="none" rx="100.98" ry="18" stroke="#777777"></ellipse><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="570.62" y="-48.17">MedicationRequest</text></g><!-- Medication --><g class="node" id="node2"><title>Medication</title><ellipse cx="848.75" cy="-51.87" fill="none" rx="62.29" ry="18" stroke="#777777"></ellipse><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="848.75" y="-48.17">Medication</text></g><!-- MedicationRequest&#45;&gt;Medication --><g class="edge" id="edge1"><title>MedicationRequest-&gt;Medication</title><path d="M671.7,-51.87C706.24,-51.87 744.22,-51.87 776.03,-51.87" fill="none" stroke="#777777"></path><polygon fill="#777777" points="776.13,-55.37 786.13,-51.87 776.13,-48.37 776.13,-55.37" stroke="#777777"></polygon><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="728.86" y="-55.67">medication</text></g><!-- MedicationDispense --><g class="node" id="node3"><title>MedicationDispense</title><ellipse cx="131.94" cy="-86.87" fill="none" rx="104.78" ry="18" stroke="#777777"></ellipse><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="131.94" y="-83.17">MedicationDispense</text></g><!-- MedicationDispense&#45;&gt;MedicationRequest --><g class="edge" id="edge4"><title>MedicationDispense-&gt;MedicationRequest</title><path d="M227.15,-79.31C298.15,-73.62 395.38,-65.83 468.1,-60" fill="none" stroke="#777777"></path><polygon fill="#777777" points="468.5,-63.48 478.19,-59.19 467.94,-56.5 468.5,-63.48" stroke="#777777"></polygon><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="366.88" y="-77.67">authorizingPrescription</text></g><!-- MedicationDispense&#45;&gt;Medication --><g class="edge" id="edge2"><title>MedicationDispense-&gt;Medication</title><path d="M234.27,-90.72C250.2,-91.2 266.48,-91.61 281.88,-91.87 455.05,-94.77 498.59,-91.11 671.36,-78.87 714.51,-75.81 725.64,-77.7 768.36,-70.87 776.13,-69.62 784.27,-68.02 792.25,-66.28" fill="none" stroke="#777777"></path><polygon fill="#777777" points="793.25,-69.64 802.23,-64.02 791.7,-62.82 793.25,-69.64" stroke="#777777"></polygon><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="570.62" y="-94.67">medication</text></g><!-- MedicationAdministration --><g class="node" id="node4"><title>MedicationAdministration</title><ellipse cx="131.94" cy="-23.87" fill="none" rx="131.88" ry="18" stroke="#777777"></ellipse><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="131.94" y="-20.17">MedicationAdministration</text></g><!-- MedicationAdministration&#45;&gt;MedicationRequest --><g class="edge" id="edge5"><title>MedicationAdministration-&gt;MedicationRequest</title><path d="M261.49,-27.33C319.69,-29.45 389.31,-32.78 451.88,-37.87 460.45,-38.56 469.36,-39.4 478.27,-40.33" fill="none" stroke="#777777"></path><polygon fill="#777777" points="477.99,-43.82 488.31,-41.4 478.73,-36.86 477.99,-43.82" stroke="#777777"></polygon><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="366.88" y="-41.67">request</text></g><!-- MedicationAdministration&#45;&gt;Medication --><g class="edge" id="edge3"><title>MedicationAdministration-&gt;Medication</title><path d="M235.05,-12.58C343.63,-2.6 520.21,7.88 671.36,-9.87 713.76,-14.84 760.74,-26.33 795.55,-36.04" fill="none" stroke="#777777"></path><polygon fill="#777777" points="794.91,-39.5 805.48,-38.85 796.81,-32.76 794.91,-39.5" stroke="#777777"></polygon><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="570.62" y="-13.67">medication</text></g><!-- AllergyIntolerance --><g class="node" id="node5"><title>AllergyIntolerance</title><ellipse cx="131.94" cy="-140.87" fill="none" rx="96.68" ry="18" stroke="#777777"></ellipse><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="131.94" y="-137.17">AllergyIntolerance</text></g><!-- Immunization --><g class="node" id="node6"><title>Immunization</title><ellipse cx="131.94" cy="-194.87" fill="none" rx="74.99" ry="18" stroke="#777777"></ellipse><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="131.94" y="-191.17">Immunization</text></g></g></svg></p>
<p><strong>What this means clinically</strong>:</p>
<p><strong>The medication lifecycle</strong>:</p>
<ol>
<li><strong>MedicationRequest</strong> (order/prescription): Physician writes order</li>
<li><strong>MedicationDispense</strong> (pharmacy fulfillment): Pharmacy fills prescription</li>
<li><strong>MedicationAdministration</strong> (actual intake): Patient takes dose (or nurse administers in hospital)</li>
</ol>
<p><strong>Each references the same Medication resource</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Medication"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metformin-500"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">      </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.nlm.nih.gov/research/umls/rxnorm"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"860975"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metformin hydrochloride 500 MG Oral Tablet"</span>
<span class="w">    </span><span class="p">}]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Tracing the chain</strong>:</p>
<p><strong>Step 1 - Order</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MedicationRequest"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"order-123"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"intent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"order"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"medicationReference"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Medication/metformin-500"</span><span class="p">},</span>
<span class="w">  </span><span class="nt">"subject"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patient/smart-1288992"</span><span class="p">},</span>
<span class="w">  </span><span class="nt">"dosageInstruction"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">    </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Take 1 tablet by mouth twice daily"</span>
<span class="w">  </span><span class="p">}]</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Step 2 - Dispense</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MedicationDispense"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dispense-456"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"completed"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"medicationReference"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Medication/metformin-500"</span><span class="p">},</span>
<span class="w">  </span><span class="nt">"authorizingPrescription"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MedicationRequest/order-123"</span><span class="p">}],</span>
<span class="w">  </span><span class="nt">"subject"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patient/smart-1288992"</span><span class="p">},</span>
<span class="w">  </span><span class="nt">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="nt">"unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tablet"</span><span class="p">},</span>
<span class="w">  </span><span class="nt">"whenHandedOver"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-11-02T15:30:00Z"</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Step 3 - Administration</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MedicationAdministration"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin-789"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"completed"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"medicationReference"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Medication/metformin-500"</span><span class="p">},</span>
<span class="w">  </span><span class="nt">"request"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MedicationRequest/order-123"</span><span class="p">},</span>
<span class="w">  </span><span class="nt">"subject"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patient/smart-1288992"</span><span class="p">},</span>
<span class="w">  </span><span class="nt">"effectiveDateTime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-11-02T20:00:00Z"</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Use cases</strong>:</p>
<ul>
<li><strong>Adherence tracking</strong>: Compare dispense dates to expected duration. If patient should need refill every 30 days but it's been 45 days, flag non-adherence.</li>
<li><strong>Drug interaction checking</strong>: When new MedicationRequest is created, check against active MedicationAdministration records.</li>
<li><strong>Billing reconciliation</strong>: Ensure every billed dispense links to a valid order.</li>
</ul>
<p><strong>AllergyIntolerance integration</strong>: Before creating MedicationRequest, check:</p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">checkAllergies</span><span class="p">(</span><span class="nx">patientId</span><span class="p">,</span><span class="w"> </span><span class="nx">medicationCode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Fetch allergies</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">allergies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span>
<span class="w">    </span><span class="sb">`/AllergyIntolerance?patient=</span><span class="si">${</span><span class="nx">patientId</span><span class="si">}</span><span class="sb">&amp;clinical-status=active`</span>
<span class="w">  </span><span class="p">);</span>

<span class="w">  </span><span class="c1">// Check if new med conflicts</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="nx">allergy</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">allergies</span><span class="p">.</span><span class="nx">entry</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nx">resource</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">isContraindicated</span><span class="p">(</span><span class="nx">allergy</span><span class="p">.</span><span class="nx">code</span><span class="p">,</span><span class="w"> </span><span class="nx">medicationCode</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">alert</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">        </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="sb">`Patient allergic to </span><span class="si">${</span><span class="nx">allergy</span><span class="p">.</span><span class="nx">code</span><span class="p">.</span><span class="nx">text</span><span class="si">}</span><span class="sb">. Cannot prescribe </span><span class="si">${</span><span class="nx">medicationCode</span><span class="p">.</span><span class="nx">text</span><span class="si">}</span><span class="sb">.`</span>
<span class="w">      </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="nx">alert</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">};</span>
<span class="p">}</span>
</code></pre></div>
<hr/>
<h3 id="care-planning-domain">Care Planning Domain</h3>
<p><span class="graphviz-light-dark" data-dark="#ffffff" data-default="#789abc" data-library-default="#789abc" data-light="#000000"></span><svg class="graphviz dot" height="109pt" viewbox="0.00 0.00 379.98 109.00" width="380pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g class="graph" id="graph0" transform="scale(1 1) rotate(0) translate(4 105)"><title>careplan</title><polygon fill="transparent" points="-4,4 -4,-105 375.98,-105 375.98,4 -4,4" stroke="transparent"></polygon><!-- CarePlan --><g class="node" id="node1"><title>CarePlan</title><ellipse cx="53.3" cy="-45" fill="none" rx="53.09" ry="18" stroke="#777777"></ellipse><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="53.3" y="-41.3">CarePlan</text></g><!-- Goal --><g class="node" id="node2"><title>Goal</title><ellipse cx="288.78" cy="-83" fill="none" rx="31.7" ry="18" stroke="#777777"></ellipse><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="288.78" y="-79.3">Goal</text></g><!-- CarePlan&#45;&gt;Goal --><g class="edge" id="edge1"><title>CarePlan-&gt;Goal</title><path d="M101.55,-52.69C144.57,-59.69 207.4,-69.92 247.94,-76.52" fill="none" stroke="#777777"></path><polygon fill="#777777" points="247.56,-80 257.99,-78.15 248.69,-73.09 247.56,-80" stroke="#777777"></polygon><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="156.09" y="-69.8">goal</text></g><!-- ServiceRequest --><g class="node" id="node3"><title>ServiceRequest</title><ellipse cx="288.78" cy="-18" fill="none" rx="83.39" ry="18" stroke="#777777"></ellipse><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="288.78" y="-14.3">ServiceRequest</text></g><!-- CarePlan&#45;&gt;ServiceRequest --><g class="edge" id="edge2"><title>CarePlan-&gt;ServiceRequest</title><path d="M104.1,-39.24C133.35,-35.86 171.07,-31.5 204.71,-27.61" fill="none" stroke="#777777"></path><polygon fill="#777777" points="205.47,-31.04 215.01,-26.42 204.67,-24.09 205.47,-31.04" stroke="#777777"></polygon><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="156.09" y="-39.8">activity</text></g><!-- ServiceRequest&#45;&gt;CarePlan --><g class="edge" id="edge3"><title>ServiceRequest-&gt;CarePlan</title><path d="M223.88,-6.72C193.45,-3.41 156.76,-2.43 124.59,-10 112.05,-12.95 99.18,-18.49 87.94,-24.31" fill="none" stroke="#777777"></path><polygon fill="#777777" points="86.04,-21.36 78.93,-29.22 89.38,-27.51 86.04,-21.36" stroke="#777777"></polygon><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="156.09" y="-13.8">basedOn</text></g></g></svg></p>
<p><strong>What this means clinically</strong>:</p>
<p><strong>CarePlan orchestrates care</strong>: A diabetes management CarePlan might include:</p>
<p><strong>Goals</strong>:</p>
<ul>
<li>HbA1c &lt; 7.0%</li>
<li>LDL cholesterol &lt; 100 mg/dL</li>
<li>Blood pressure &lt; 130/80 mmHg</li>
</ul>
<p><strong>Activities (ServiceRequests)</strong>:</p>
<ul>
<li>Order HbA1c every 3 months</li>
<li>Order lipid panel annually</li>
<li>Refer to nutritionist</li>
<li>Refer to ophthalmologist for eye exam</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CarePlan"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"intent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"plan"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"subject"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patient/smart-1288992"</span><span class="p">},</span>
<span class="w">  </span><span class="nt">"category"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">    </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">      </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://snomed.info/sct"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"698358001"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Diabetes self-management plan"</span>
<span class="w">    </span><span class="p">}]</span>
<span class="w">  </span><span class="p">}],</span>
<span class="w">  </span><span class="nt">"goal"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Goal/hba1c-target"</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Goal/ldl-target"</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Goal/bp-target"</span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">"activity"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">    </span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ServiceRequest/hba1c-every-3mo"</span><span class="p">},</span>
<span class="w">    </span><span class="nt">"detail"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"in-progress"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Check HbA1c every 3 months"</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ServiceRequest/lipid-panel-annual"</span><span class="p">},</span>
<span class="w">    </span><span class="nt">"detail"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"in-progress"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Annual lipid panel"</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}]</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Goal detail</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Goal"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hba1c-target"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"lifecycleStatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"achievementStatus"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">      </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://terminology.hl7.org/CodeSystem/goal-achievement"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"in-progress"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"In Progress"</span>
<span class="w">    </span><span class="p">}]</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HbA1c less than 7.0%"</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">"subject"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patient/smart-1288992"</span><span class="p">},</span>
<span class="w">  </span><span class="nt">"target"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">    </span><span class="nt">"measure"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">        </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://loinc.org"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4548-4"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hemoglobin A1c"</span>
<span class="w">      </span><span class="p">}]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">"detailQuantity"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">7.0</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"comparator"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"%"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://unitsofmeasure.org"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"%"</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">"dueDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-02-01"</span>
<span class="w">  </span><span class="p">}]</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Tracking progress</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">evaluateGoalProgress</span><span class="p">(</span><span class="nx">goalId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">goal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="sb">`/Goal/</span><span class="si">${</span><span class="nx">goalId</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">targetCode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">goal</span><span class="p">.</span><span class="nx">target</span><span class="p">[</span><span class="mf">0</span><span class="p">].</span><span class="nx">measure</span><span class="p">.</span><span class="nx">coding</span><span class="p">[</span><span class="mf">0</span><span class="p">].</span><span class="nx">code</span><span class="p">;</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">targetValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">goal</span><span class="p">.</span><span class="nx">target</span><span class="p">[</span><span class="mf">0</span><span class="p">].</span><span class="nx">detailQuantity</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>

<span class="w">  </span><span class="c1">// Find most recent observation for this measure</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">observations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span>
<span class="w">    </span><span class="sb">`/Observation?patient=</span><span class="si">${</span><span class="nx">goal</span><span class="p">.</span><span class="nx">subject</span><span class="p">.</span><span class="nx">reference</span><span class="si">}</span><span class="sb">&amp;code=</span><span class="si">${</span><span class="nx">targetCode</span><span class="si">}</span><span class="sb">&amp;_sort=-date&amp;_count=1`</span>
<span class="w">  </span><span class="p">);</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">latestObs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">observations</span><span class="p">.</span><span class="nx">entry</span><span class="p">[</span><span class="mf">0</span><span class="p">].</span><span class="nx">resource</span><span class="p">;</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">currentValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">latestObs</span><span class="p">.</span><span class="nx">valueQuantity</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">currentValue</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">targetValue</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="s2">"achieved"</span><span class="p">,</span>
<span class="w">      </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="sb">`Goal met! Current HbA1c: </span><span class="si">${</span><span class="nx">currentValue</span><span class="si">}</span><span class="sb">%`</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="s2">"in-progress"</span><span class="p">,</span>
<span class="w">      </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="sb">`Goal not yet met. Current: </span><span class="si">${</span><span class="nx">currentValue</span><span class="si">}</span><span class="sb">%, Target: &lt;</span><span class="si">${</span><span class="nx">targetValue</span><span class="si">}</span><span class="sb">%`</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<hr/>
<h3 id="documentation-domain">Documentation Domain</h3>
<p><span class="graphviz-light-dark" data-dark="#ffffff" data-default="#789abc" data-library-default="#789abc" data-light="#000000"></span><svg class="graphviz dot" height="98pt" viewbox="0.00 0.00 444.57 98.00" width="445pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g class="graph" id="graph0" transform="scale(1 1) rotate(0) translate(4 94)"><title>documentation</title><polygon fill="transparent" points="-4,4 -4,-94 440.57,-94 440.57,4 -4,4" stroke="transparent"></polygon><!-- DocumentReference --><g class="node" id="node1"><title>DocumentReference</title><ellipse cx="104.64" cy="-72" fill="none" rx="104.78" ry="18" stroke="#777777"></ellipse><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="104.64" y="-68.3">DocumentReference</text></g><!-- Encounter --><g class="node" id="node3"><title>Encounter</title><ellipse cx="377.43" cy="-45" fill="none" rx="59.29" ry="18" stroke="#777777"></ellipse><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="377.43" y="-41.3">Encounter</text></g><!-- DocumentReference&#45;&gt;Encounter --><g class="edge" id="edge1"><title>DocumentReference-&gt;Encounter</title><path d="M195.43,-63.05C233.12,-59.29 276.16,-55 310.8,-51.54" fill="none" stroke="#777777"></path><polygon fill="#777777" points="311.2,-55.02 320.8,-50.55 310.5,-48.06 311.2,-55.02" stroke="#777777"></polygon><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="263.78" y="-62.8">context</text></g><!-- Composition --><g class="node" id="node2"><title>Composition</title><ellipse cx="104.64" cy="-18" fill="none" rx="68.79" ry="18" stroke="#777777"></ellipse><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="104.64" y="-14.3">Composition</text></g><!-- Composition&#45;&gt;Encounter --><g class="edge" id="edge2"><title>Composition-&gt;Encounter</title><path d="M171.98,-21.8C209.67,-24.29 257.7,-28.01 300.28,-33 305.1,-33.56 310.07,-34.21 315.07,-34.9" fill="none" stroke="#777777"></path><polygon fill="#777777" points="314.91,-38.41 325.3,-36.37 315.9,-31.48 314.91,-38.41" stroke="#777777"></polygon><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="263.78" y="-36.8">encounter</text></g></g></svg></p>
<p><strong>What this means clinically</strong>:</p>
<p><strong>DocumentReference</strong> points to external documents (PDFs, images, videos):</p>
<ul>
<li>Scanned consent forms</li>
<li>External records (from another hospital)</li>
<li>Imaging studies (DICOM images, radiology reports)</li>
<li>Patient-uploaded documents (home blood pressure logs)</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DocumentReference"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"current"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">      </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://loinc.org"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"34133-9"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Summary of episode note"</span>
<span class="w">    </span><span class="p">}]</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">"subject"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patient/smart-1288992"</span><span class="p">},</span>
<span class="w">  </span><span class="nt">"context"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"encounter"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Encounter/smart-enc-456"</span><span class="p">}],</span>
<span class="w">    </span><span class="nt">"period"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-11-01T10:00:00-05:00"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"end"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-11-01T11:15:00-05:00"</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">    </span><span class="nt">"attachment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"contentType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"application/pdf"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://ehr.example.org/documents/visit-summary-456.pdf"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"After-Visit Summary - Nov 1, 2024"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"creation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-11-01T11:20:00Z"</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}]</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Composition</strong> is a structured clinical document (like a CDA):</p>
<ul>
<li>Discharge summary</li>
<li>Progress note</li>
<li>Referral letter</li>
<li>Consultation note</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Composition"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"final"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">      </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://loinc.org"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"34133-9"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Summary of episode note"</span>
<span class="w">    </span><span class="p">}]</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">"subject"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patient/smart-1288992"</span><span class="p">},</span>
<span class="w">  </span><span class="nt">"encounter"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Encounter/smart-enc-456"</span><span class="p">},</span>
<span class="w">  </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-11-01T11:15:00-05:00"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"author"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Practitioner/smart-pract-789"</span><span class="p">}],</span>
<span class="w">  </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Diabetes Follow-up Visit Note"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"section"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Chief Complaint"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"generated"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"div"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;div xmlns=\"http://www.w3.org/1999/xhtml\"&gt;&lt;p&gt;Follow-up for Type 2 diabetes management&lt;/p&gt;&lt;/div&gt;"</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Assessment and Plan"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"entry"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Condition/condition-diabetes"</span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MedicationRequest/medrx-metformin"</span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"generated"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"div"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;div xmlns=\"http://www.w3.org/1999/xhtml\"&gt;&lt;p&gt;HbA1c elevated at 7.2%. Increase metformin to 1000mg BID. Recheck in 3 months.&lt;/p&gt;&lt;/div&gt;"</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}]</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Key difference</strong>:</p>
<ul>
<li><strong>DocumentReference</strong>: Wrapper around a binary document (PDF, DICOM)</li>
<li><strong>Composition</strong>: Structured narrative with references to other FHIR resources</li>
</ul>
<hr/>
<h3 id="scheduling-domain">Scheduling Domain</h3>
<p><span class="graphviz-light-dark" data-dark="#ffffff" data-default="#789abc" data-library-default="#789abc" data-light="#000000"></span><svg class="graphviz dot" height="98pt" viewbox="0.00 0.00 724.96 98.00" width="725pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g class="graph" id="graph0" transform="scale(1 1) rotate(0) translate(4 94)"><title>scheduling</title><polygon fill="transparent" points="-4,4 -4,-94 720.96,-94 720.96,4 -4,4" stroke="transparent"></polygon><!-- Appointment --><g class="node" id="node1"><title>Appointment</title><ellipse cx="70.84" cy="-45" fill="none" rx="70.69" ry="18" stroke="#777777"></ellipse><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="70.84" y="-41.3">Appointment</text></g><!-- Slot --><g class="node" id="node2"><title>Slot</title><ellipse cx="233.93" cy="-45" fill="none" rx="29.5" ry="18" stroke="#777777"></ellipse><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="233.93" y="-41.3">Slot</text></g><!-- Appointment&#45;&gt;Slot --><g class="edge" id="edge1"><title>Appointment-&gt;Slot</title><path d="M142.03,-45C159.94,-45 178.55,-45 194.23,-45" fill="none" stroke="#777777"></path><polygon fill="#777777" points="194.57,-48.5 204.57,-45 194.57,-41.5 194.57,-48.5" stroke="#777777"></polygon><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="173.19" y="-48.8">slot</text></g><!-- Schedule --><g class="node" id="node3"><title>Schedule</title><ellipse cx="416.48" cy="-45" fill="none" rx="53.09" ry="18" stroke="#777777"></ellipse><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="416.48" y="-41.3">Schedule</text></g><!-- Slot&#45;&gt;Schedule --><g class="edge" id="edge2"><title>Slot-&gt;Schedule</title><path d="M263.54,-45C287.48,-45 322.51,-45 352.9,-45" fill="none" stroke="#777777"></path><polygon fill="#777777" points="353,-48.5 363,-45 353,-41.5 353,-48.5" stroke="#777777"></polygon><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="313.18" y="-48.8">schedule</text></g><!-- PractitionerRole --><g class="node" id="node4"><title>PractitionerRole</title><ellipse cx="629.87" cy="-72" fill="none" rx="87.18" ry="18" stroke="#777777"></ellipse><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="629.87" y="-68.3">PractitionerRole</text></g><!-- Schedule&#45;&gt;PractitionerRole --><g class="edge" id="edge3"><title>Schedule-&gt;PractitionerRole</title><path d="M466.51,-51.26C489.87,-54.25 518.47,-57.9 545.12,-61.3" fill="none" stroke="#777777"></path><polygon fill="#777777" points="544.87,-64.8 555.23,-62.59 545.75,-57.86 544.87,-64.8" stroke="#777777"></polygon><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="506.27" y="-61.8">actor</text></g><!-- Location --><g class="node" id="node5"><title>Location</title><ellipse cx="629.87" cy="-18" fill="none" rx="50.09" ry="18" stroke="#777777"></ellipse><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="629.87" y="-14.3">Location</text></g><!-- Schedule&#45;&gt;Location --><g class="edge" id="edge4"><title>Schedule-&gt;Location</title><path d="M465.86,-37.98C473.2,-36.95 480.68,-35.93 487.77,-35 515.42,-31.37 546.14,-27.63 571.85,-24.59" fill="none" stroke="#777777"></path><polygon fill="#777777" points="572.28,-28.06 581.8,-23.42 571.46,-21.11 572.28,-28.06" stroke="#777777"></polygon><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="506.27" y="-38.8">actor</text></g></g></svg></p>
<p><strong>What this means clinically</strong>:</p>
<p><strong>The scheduling hierarchy</strong>:</p>
<ol>
<li><strong>Schedule</strong>: Defines availability (e.g., "Dr. Johnson's outpatient clinic schedule")</li>
<li><strong>Slot</strong>: Specific time block (e.g., "Tuesday, Nov 5, 10:00–10:30 AM")</li>
<li><strong>Appointment</strong>: Booked slot with patient (e.g., "Amy Shaw's follow-up")</li>
</ol>
<p><strong>Schedule</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Schedule"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dr-johnson-clinic"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"serviceType"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">    </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">      </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://snomed.info/sct"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"310000008"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Internal medicine clinic"</span>
<span class="w">    </span><span class="p">}]</span>
<span class="w">  </span><span class="p">}],</span>
<span class="w">  </span><span class="nt">"actor"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PractitionerRole/dr-johnson-main-clinic"</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Location/room-3"</span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">"planningHorizon"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-11-01"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"end"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-12-31"</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">"comment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dr. Johnson's clinic schedule for Q4 2024"</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Slot</strong> (part of the schedule):</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Slot"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"slot-12345"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"schedule"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Schedule/dr-johnson-clinic"</span><span class="p">},</span>
<span class="w">  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"free"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-11-05T10:00:00-05:00"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"end"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-11-05T10:30:00-05:00"</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Appointment</strong> (books the slot):</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Appointment"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"booked"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"serviceType"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">    </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">      </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://snomed.info/sct"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"310000008"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Internal medicine clinic"</span>
<span class="w">    </span><span class="p">}]</span>
<span class="w">  </span><span class="p">}],</span>
<span class="w">  </span><span class="nt">"appointmentType"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">      </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://terminology.hl7.org/CodeSystem/v2-0276"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FOLLOWUP"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Follow-up"</span>
<span class="w">    </span><span class="p">}]</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">"reasonReference"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Condition/condition-diabetes"</span><span class="p">}],</span>
<span class="w">  </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Diabetes follow-up - review HbA1c results"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-11-05T10:00:00-05:00"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"end"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-11-05T10:30:00-05:00"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"participant"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"actor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patient/smart-1288992"</span><span class="p">},</span>
<span class="w">      </span><span class="nt">"required"</span><span class="p">:</span><span class="w"> </span><span class="s2">"required"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"accepted"</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"actor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PractitionerRole/dr-johnson-main-clinic"</span><span class="p">},</span>
<span class="w">      </span><span class="nt">"required"</span><span class="p">:</span><span class="w"> </span><span class="s2">"required"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"accepted"</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"actor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Location/room-3"</span><span class="p">},</span>
<span class="w">      </span><span class="nt">"required"</span><span class="p">:</span><span class="w"> </span><span class="s2">"required"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"accepted"</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">"slot"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Slot/slot-12345"</span><span class="p">}]</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Booking workflow</strong>:</p>
<ol>
<li>Search available Slots: <code>GET /Slot?schedule=dr-johnson-clinic&amp;status=free&amp;start=ge2024-11-05</code></li>
<li>Create Appointment: <code>POST /Appointment</code> (body as above)</li>
<li>Server marks Slot as <code>busy</code>: <code>PUT /Slot/slot-12345</code> (status: "busy")</li>
</ol>
<p><strong>Why this matters</strong>:</p>
<ul>
<li>Prevents double-booking (Slot can only have one Appointment)</li>
<li>Supports resource scheduling (rooms, equipment)</li>
<li>Enables waitlist management (cancelled Appointment frees Slot)</li>
</ul>
<hr/>
<h3 id="financial-domain">Financial Domain</h3>
<p><span class="graphviz-light-dark" data-dark="#ffffff" data-default="#789abc" data-library-default="#789abc" data-light="#000000"></span><svg class="graphviz dot" height="125pt" viewbox="0.00 0.00 718.85 125.00" width="719pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g class="graph" id="graph0" transform="scale(1 1) rotate(0) translate(4 121)"><title>financial</title><polygon fill="transparent" points="-4,4 -4,-121 714.85,-121 714.85,4 -4,4" stroke="transparent"></polygon><!-- Coverage --><g class="node" id="node1"><title>Coverage</title><ellipse cx="110.49" cy="-18" fill="none" rx="54.69" ry="18" stroke="#777777"></ellipse><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="110.49" y="-14.3">Coverage</text></g><!-- Organization --><g class="node" id="node6"><title>Organization</title><ellipse cx="368.82" cy="-18" fill="none" rx="70.69" ry="18" stroke="#777777"></ellipse><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="368.82" y="-14.3">Organization</text></g><!-- Coverage&#45;&gt;Organization --><g class="edge" id="edge4"><title>Coverage-&gt;Organization</title><path d="M165.23,-18C200.61,-18 247.58,-18 287.38,-18" fill="none" stroke="#777777"></path><polygon fill="#777777" points="287.6,-21.5 297.6,-18 287.6,-14.5 287.6,-21.5" stroke="#777777"></polygon><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="259.48" y="-21.8">payor</text></g><!-- Claim --><g class="node" id="node2"><title>Claim</title><ellipse cx="368.82" cy="-72" fill="none" rx="37.89" ry="18" stroke="#777777"></ellipse><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="368.82" y="-68.3">Claim</text></g><!-- Patient --><g class="node" id="node4"><title>Patient</title><ellipse cx="623.76" cy="-99" fill="none" rx="44.39" ry="18" stroke="#777777"></ellipse><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="623.76" y="-95.3">Patient</text></g><!-- Claim&#45;&gt;Patient --><g class="edge" id="edge1"><title>Claim-&gt;Patient</title><path d="M405.8,-75.84C448.83,-80.43 521.23,-88.16 570.46,-93.42" fill="none" stroke="#777777"></path><polygon fill="#777777" points="570.28,-96.92 580.59,-94.5 571.02,-89.96 570.28,-96.92" stroke="#777777"></polygon><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="488.17" y="-90.8">patient</text></g><!-- PractitionerRole --><g class="node" id="node5"><title>PractitionerRole</title><ellipse cx="623.76" cy="-45" fill="none" rx="87.18" ry="18" stroke="#777777"></ellipse><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="623.76" y="-41.3">PractitionerRole</text></g><!-- Claim&#45;&gt;PractitionerRole --><g class="edge" id="edge2"><title>Claim-&gt;PractitionerRole</title><path d="M405.72,-67.83C421.63,-66 440.58,-63.85 457.67,-62 482.72,-59.28 509.92,-56.44 534.88,-53.87" fill="none" stroke="#777777"></path><polygon fill="#777777" points="535.47,-57.33 545.06,-52.83 534.75,-50.37 535.47,-57.33" stroke="#777777"></polygon><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="488.17" y="-65.8">provider</text></g><!-- ExplanationOfBenefit --><g class="node" id="node3"><title>ExplanationOfBenefit</title><ellipse cx="110.49" cy="-72" fill="none" rx="110.48" ry="18" stroke="#777777"></ellipse><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="110.49" y="-68.3">ExplanationOfBenefit</text></g><!-- ExplanationOfBenefit&#45;&gt;Claim --><g class="edge" id="edge3"><title>ExplanationOfBenefit-&gt;Claim</title><path d="M221.31,-72C256.14,-72 292.8,-72 320.74,-72" fill="none" stroke="#777777"></path><polygon fill="#777777" points="321,-75.5 331,-72 321,-68.5 321,-75.5" stroke="#777777"></polygon><text fill="#777777" font-family="Times,serif" font-size="14.00" text-anchor="middle" x="259.48" y="-75.8">claim</text></g></g></svg></p>
<p><strong>What this means clinically</strong>:</p>
<p><strong>Coverage</strong> (insurance card information):</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Coverage"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">      </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://terminology.hl7.org/CodeSystem/v3-ActCode"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HIP"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Health Insurance Plan"</span>
<span class="w">    </span><span class="p">}]</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">"subscriber"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patient/smart-1288992"</span><span class="p">},</span>
<span class="w">  </span><span class="nt">"subscriberId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABC123456789"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"beneficiary"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patient/smart-1288992"</span><span class="p">},</span>
<span class="w">  </span><span class="nt">"relationship"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">      </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://terminology.hl7.org/CodeSystem/subscriber-relationship"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"self"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Self"</span>
<span class="w">    </span><span class="p">}]</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">"period"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-01"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"end"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-12-31"</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">"payor"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Organization/blue-cross"</span><span class="p">}],</span>
<span class="w">  </span><span class="nt">"class"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">        </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://terminology.hl7.org/CodeSystem/coverage-class"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"group"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Group"</span>
<span class="w">      </span><span class="p">}]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EMPLOYER-GROUP-001"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example Employer Health Plan"</span>
<span class="w">  </span><span class="p">}]</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Claim</strong> (bill submitted to insurance):</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Claim"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">      </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://terminology.hl7.org/CodeSystem/claim-type"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"professional"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Professional"</span>
<span class="w">    </span><span class="p">}]</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">"use"</span><span class="p">:</span><span class="w"> </span><span class="s2">"claim"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"patient"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patient/smart-1288992"</span><span class="p">},</span>
<span class="w">  </span><span class="nt">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-11-01T12:00:00Z"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PractitionerRole/dr-johnson-main-clinic"</span><span class="p">},</span>
<span class="w">  </span><span class="nt">"priority"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">      </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://terminology.hl7.org/CodeSystem/processpriority"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"normal"</span>
<span class="w">    </span><span class="p">}]</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">"insurance"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">    </span><span class="nt">"sequence"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"focal"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"coverage"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Coverage/patient-coverage-123"</span><span class="p">}</span>
<span class="w">  </span><span class="p">}],</span>
<span class="w">  </span><span class="nt">"item"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">    </span><span class="nt">"sequence"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"productOrService"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">        </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.ama-assn.org/go/cpt"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"99213"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Office visit, established patient, level 3"</span>
<span class="w">      </span><span class="p">}]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">"servicedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-11-01"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"unitPrice"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">150.00</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">"net"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">150.00</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"sequence"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"productOrService"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">        </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.ama-assn.org/go/cpt"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"83036"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hemoglobin A1c"</span>
<span class="w">      </span><span class="p">}]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">"servicedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-11-01"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"unitPrice"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">45.00</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">"net"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">45.00</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}],</span>
<span class="w">  </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">195.00</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>ExplanationOfBenefit</strong> (insurance response):</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ExplanationOfBenefit"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">      </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://terminology.hl7.org/CodeSystem/claim-type"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"professional"</span>
<span class="w">    </span><span class="p">}]</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">"use"</span><span class="p">:</span><span class="w"> </span><span class="s2">"claim"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"patient"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patient/smart-1288992"</span><span class="p">},</span>
<span class="w">  </span><span class="nt">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-11-15T10:00:00Z"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"insurer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Organization/blue-cross"</span><span class="p">},</span>
<span class="w">  </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PractitionerRole/dr-johnson-main-clinic"</span><span class="p">},</span>
<span class="w">  </span><span class="nt">"claim"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Claim/claim-456"</span><span class="p">},</span>
<span class="w">  </span><span class="nt">"outcome"</span><span class="p">:</span><span class="w"> </span><span class="s2">"complete"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"item"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">    </span><span class="nt">"sequence"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"productOrService"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">        </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.ama-assn.org/go/cpt"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"99213"</span>
<span class="w">      </span><span class="p">}]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">"adjudication"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">      </span><span class="nt">"category"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">          </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://terminology.hl7.org/CodeSystem/adjudication"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"submitted"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Submitted Amount"</span>
<span class="w">        </span><span class="p">}]</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">150.00</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"category"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">          </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"benefit"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Benefit Amount"</span>
<span class="w">        </span><span class="p">}]</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">120.00</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"category"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">          </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"copay"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Copay"</span>
<span class="w">        </span><span class="p">}]</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">30.00</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}]</span>
<span class="w">  </span><span class="p">}],</span>
<span class="w">  </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">    </span><span class="nt">"category"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">        </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"submitted"</span>
<span class="w">      </span><span class="p">}]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">195.00</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"category"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">        </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"benefit"</span>
<span class="w">      </span><span class="p">}]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">156.00</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}],</span>
<span class="w">  </span><span class="nt">"payment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">        </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://terminology.hl7.org/CodeSystem/ex-paymenttype"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"complete"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Complete"</span>
<span class="w">      </span><span class="p">}]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">156.00</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>The flow</strong>:</p>
<ol>
<li>Patient has Coverage (insurance)</li>
<li>Provider submits Claim ($195 for visit + lab)</li>
<li>Insurer processes and returns ExplanationOfBenefit (pays $156, patient owes $39 copay)</li>
</ol>
<hr/>
<h2 id="the-comprehensive-relationship-diagram">The Comprehensive Relationship Diagram</h2>
<p>Here is a comprehensive diagram showing all these relationships together — as a visual reference.</p>
<div class="mermaid">graph TD
    Patient[Patient]
    Practitioner[Practitioner]
    Organization[Organization]
    Encounter[Encounter]
    Condition[Condition]
    Observation[Observation]
    MedicationRequest[MedicationRequest]
    Procedure[Procedure]
    AllergyIntolerance[AllergyIntolerance]
    DiagnosticReport[DiagnosticReport]
    Immunization[Immunization]
    CarePlan[CarePlan]

    Patient --&gt;|subject| Condition
    Patient --&gt;|subject| Observation
    Patient --&gt;|subject| MedicationRequest
    Patient --&gt;|subject| Procedure
    Patient --&gt;|patient| AllergyIntolerance
    Patient --&gt;|subject| Encounter
    Patient --&gt;|subject| DiagnosticReport
    Patient --&gt;|patient| Immunization
    Patient --&gt;|subject| CarePlan

    Practitioner --&gt;|performer| Procedure
    Practitioner --&gt;|requester| MedicationRequest
    Practitioner --&gt;|participant| Encounter

    Organization --&gt;|managingOrganization| Patient
    Organization --&gt;|serviceProvider| Encounter

    Encounter --&gt;|encounter| Condition
    Encounter --&gt;|encounter| Observation
    Encounter --&gt;|encounter| Procedure

    Condition --&gt;|evidence| Observation
    DiagnosticReport --&gt;|result| Observation
</div>
<p>The diagram shows:</p>
<ul>
<li>Patient at the center, referenced by nearly everything</li>
<li>Encounter anchoring clinical events</li>
<li>PractitionerRole mediating actor relationships</li>
<li>CarePlan connecting goals and activities</li>
<li>Claim linking to Coverage and ExplanationOfBenefit</li>
</ul>
<p><strong>How to use the diagram</strong>:</p>
<ol>
<li><strong>Planning data models</strong>: Identify which references your app needs to traverse</li>
<li><strong>Optimizing queries</strong>: Use <code>_include</code> for frequently co-accessed resources</li>
<li><strong>Debugging</strong>: Trace unexpected nulls back to missing references</li>
<li><strong>Documentation</strong>: Share with stakeholders to explain FHIR's interconnectedness</li>
</ol>
<hr/>
<h2 id="practical-traversal-patterns">Practical Traversal Patterns</h2>
<h3 id="pattern-1-patient-centric-view">Pattern 1: Patient-Centric View</h3>
<p><strong>Goal</strong>: Show everything about a patient</p>
<div class="highlight"><pre><span></span><code><span class="err">GET /Patient/smart-1288992?</span>
<span class="err">  _revinclude=Observation:patient&amp;</span>
<span class="err">  _revinclude=Condition:patient&amp;</span>
<span class="err">  _revinclude=MedicationRequest:patient&amp;</span>
<span class="err">  _revinclude=Encounter:patient&amp;</span>
<span class="err">  _revinclude=AllergyIntolerance:patient</span>
</code></pre></div>
<p>Returns a Bundle with Patient plus all related resources. Apps then filter/group by type.</p>
<p><strong>Limitation</strong>: Can be huge (thousands of resources). Better approach: lazy load by category.</p>
<hr/>
<h3 id="pattern-2-encounter-centric-view">Pattern 2: Encounter-Centric View</h3>
<p><strong>Goal</strong>: Show everything from a specific visit</p>
<div class="highlight"><pre><span></span><code><span class="err">GET /Encounter/smart-enc-456?</span>
<span class="err">  _revinclude=Observation:encounter&amp;</span>
<span class="err">  _revinclude=Condition:encounter&amp;</span>
<span class="err">  _revinclude=Procedure:encounter&amp;</span>
<span class="err">  _revinclude=MedicationRequest:encounter&amp;</span>
<span class="err">  _include=Encounter:participant</span>
</code></pre></div>
<p>Returns Encounter plus:</p>
<ul>
<li>All observations performed during visit</li>
<li>Diagnoses made during visit</li>
<li>Procedures performed</li>
<li>Medications ordered</li>
<li>Providers who participated</li>
</ul>
<p><strong>Use case</strong>: After-visit summary, billing worksheet, chart review.</p>
<hr/>
<h3 id="pattern-3-condition-centric-view">Pattern 3: Condition-Centric View</h3>
<p><strong>Goal</strong>: See all evidence and treatments for a diagnosis</p>
<p><strong>Step 1</strong>: Get the condition with evidence</p>
<div class="highlight"><pre><span></span><code><span class="err">GET /Condition/condition-diabetes?_include=Condition:evidence</span>
</code></pre></div>
<p>Returns Condition plus referenced Observations (HbA1c results).</p>
<p><strong>Step 2</strong>: Get related treatments</p>
<div class="highlight"><pre><span></span><code><span class="err">GET /MedicationRequest?reason-reference=Condition/condition-diabetes</span>
</code></pre></div>
<p>Returns all meds prescribed for this diagnosis.</p>
<p><strong>Step 3</strong>: Get related care plans</p>
<div class="highlight"><pre><span></span><code><span class="err">GET /CarePlan?addresses=Condition/condition-diabetes&amp;_include=CarePlan:goal</span>
</code></pre></div>
<p>Returns CarePlans addressing diabetes plus their Goals.</p>
<p><strong>Combined view</strong>: App displays condition with supporting evidence, current treatments, and care plan goals.</p>
<hr/>
<h3 id="pattern-4-medication-lifecycle-trace">Pattern 4: Medication Lifecycle Trace</h3>
<p><strong>Goal</strong>: Track a medication from order to administration</p>
<p><strong>Step 1</strong>: Find the order</p>
<div class="highlight"><pre><span></span><code><span class="err">GET /MedicationRequest/order-123</span>
</code></pre></div>
<p><strong>Step 2</strong>: Find dispenses for this order</p>
<div class="highlight"><pre><span></span><code><span class="err">GET /MedicationDispense?prescription=MedicationRequest/order-123</span>
</code></pre></div>
<p><strong>Step 3</strong>: Find administrations referencing the order</p>
<div class="highlight"><pre><span></span><code><span class="err">GET /MedicationAdministration?request=MedicationRequest/order-123</span>
</code></pre></div>
<p><strong>Timeline view</strong>:</p>
<div class="highlight"><pre><span></span><code>Nov 1, 10:45 AM - Ordered (MedicationRequest)
Nov 2, 3:30 PM  - Dispensed (MedicationDispense) - 60 tablets
Nov 2, 8:00 PM  - First dose (MedicationAdministration)
Nov 3, 8:00 AM  - Second dose (MedicationAdministration)
...
</code></pre></div>
<hr/>
<h3 id="pattern-5-diagnostic-report-expansion">Pattern 5: Diagnostic Report Expansion</h3>
<p><strong>Goal</strong>: Show a lab report with all results</p>
<div class="highlight"><pre><span></span><code><span class="err">GET /DiagnosticReport/cbc-report?_include=DiagnosticReport:result</span>
</code></pre></div>
<p>Returns DiagnosticReport plus all referenced Observations (WBC, RBC, hemoglobin, etc.).</p>
<p><strong>Display logic</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">displayDiagnosticReport</span><span class="p">(</span><span class="nx">bundle</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">report</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">bundle</span><span class="p">.</span><span class="nx">entry</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nx">resource</span><span class="p">.</span><span class="nx">resourceType</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">"DiagnosticReport"</span><span class="p">).</span><span class="nx">resource</span><span class="p">;</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">observations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">bundle</span><span class="p">.</span><span class="nx">entry</span>
<span class="w">    </span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nx">resource</span><span class="p">.</span><span class="nx">resourceType</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">"Observation"</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nx">resource</span><span class="p">);</span>

<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Report: </span><span class="si">${</span><span class="nx">report</span><span class="p">.</span><span class="nx">code</span><span class="p">.</span><span class="nx">text</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Issued: </span><span class="si">${</span><span class="nx">report</span><span class="p">.</span><span class="nx">issued</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"\nResults:"</span><span class="p">);</span>

<span class="w">  </span><span class="nx">observations</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">obs</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">obs</span><span class="p">.</span><span class="nx">code</span><span class="p">.</span><span class="nx">text</span><span class="p">;</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">obs</span><span class="p">.</span><span class="nx">valueQuantity</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">unit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">obs</span><span class="p">.</span><span class="nx">valueQuantity</span><span class="p">.</span><span class="nx">unit</span><span class="p">;</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">interpretation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">obs</span><span class="p">.</span><span class="nx">interpretation</span><span class="o">?</span><span class="p">.[</span><span class="mf">0</span><span class="p">]</span><span class="o">?</span><span class="p">.</span><span class="nx">coding</span><span class="o">?</span><span class="p">.[</span><span class="mf">0</span><span class="p">]</span><span class="o">?</span><span class="p">.</span><span class="nx">code</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s2">"N"</span><span class="p">;</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">flag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">interpretation</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">"H"</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s2">"↑"</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">interpretation</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">"L"</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s2">"↓"</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">""</span><span class="p">;</span>

<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`  </span><span class="si">${</span><span class="nx">name</span><span class="si">}</span><span class="sb">: </span><span class="si">${</span><span class="nx">value</span><span class="si">}</span><span class="sb"> </span><span class="si">${</span><span class="nx">unit</span><span class="si">}</span><span class="sb"> </span><span class="si">${</span><span class="nx">flag</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">}</span>
</code></pre></div>
<p>Output:</p>
<div class="highlight"><pre><span></span><code>Report: Complete Blood Count
Issued: 2024-11-01T16:30:00Z

Results:
  White Blood Cell Count: 7.5 K/uL
  Red Blood Cell Count: 4.8 M/uL
  Hemoglobin: 14.2 g/dL
  Hematocrit: 42.1 %
  Platelet Count: 185 K/uL
</code></pre></div>
<hr/>
<h2 id="reference-integrity-and-error-handling">Reference Integrity and Error Handling</h2>
<h3 id="broken-references">Broken References</h3>
<p><strong>Scenario</strong>: An Observation references <code>Patient/deleted-123</code>, but that patient was deleted.</p>
<p><strong>What happens</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="err">GET /Observation/obs-456</span>
</code></pre></div>
<p>Response includes:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"subject"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patient/deleted-123"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe (deleted)"</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Attempting to resolve:</p>
<div class="highlight"><pre><span></span><code><span class="err">GET /Patient/deleted-123</span>
</code></pre></div>
<p>Returns <code>410 Gone</code> or <code>404 Not Found</code>.</p>
<p><strong>App handling</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">fetchObservationWithPatient</span><span class="p">(</span><span class="nx">obsId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">obs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="sb">`/Observation/</span><span class="si">${</span><span class="nx">obsId</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>

<span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">patient</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="sb">`/</span><span class="si">${</span><span class="nx">obs</span><span class="p">.</span><span class="nx">subject</span><span class="p">.</span><span class="nx">reference</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="nx">observation</span><span class="o">:</span><span class="w"> </span><span class="nx">obs</span><span class="p">,</span><span class="w"> </span><span class="nx">patient</span><span class="p">};</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">410</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">error</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">404</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">observation</span><span class="o">:</span><span class="w"> </span><span class="nx">obs</span><span class="p">,</span>
<span class="w">        </span><span class="nx">patient</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="nx">error</span><span class="o">:</span><span class="w"> </span><span class="s2">"Patient record no longer available"</span>
<span class="w">      </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">throw</span><span class="w"> </span><span class="nx">error</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Display</strong>: Show observation with placeholder "(Patient Unavailable)" instead of crashing.</p>
<hr/>
<h3 id="contained-resources-when-to-use">Contained Resources: When to Use</h3>
<p><strong>Contained resources</strong> embed referenced resources inline:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Observation"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"contained"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Practitioner"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"contained-pract"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dr. Sarah Johnson"</span><span class="p">}]</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">"performer"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#contained-pract"</span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>When to use contained</strong>:</p>
<ul>
<li>Referenced resource has no independent existence (temporary entity)</li>
<li>Referenced resource is from another system and you only have partial data</li>
<li>Performance optimization (avoid extra HTTP requests)</li>
</ul>
<p><strong>When NOT to use contained</strong>:</p>
<ul>
<li>Resource needs to be searchable independently</li>
<li>Resource is referenced by multiple other resources</li>
<li>Resource needs version history</li>
</ul>
<p><strong>Best practice</strong>: Use regular references by default. Use contained only when necessary.</p>
<hr/>
<h2 id="circular-references-and-infinite-loops">Circular References and Infinite Loops</h2>
<p><strong>Scenario</strong>: Observation → Encounter → DiagnosticReport → Observation (circular!)</p>
<p><strong>What happens with <code>_include</code></strong>:</p>
<div class="highlight"><pre><span></span><code><span class="err">GET /Observation/obs-123?_include=Observation:encounter&amp;_include=Encounter:diagnosis</span>
</code></pre></div>
<p>FHIR servers prevent infinite loops by:</p>
<ol>
<li><strong>Not following includes recursively</strong> (only one level deep by default)</li>
<li><strong>Detecting cycles</strong> and breaking them</li>
<li><strong>Limiting bundle size</strong> (max entries per bundle)</li>
</ol>
<p><strong>App strategy</strong>: Build a visited set:</p>
<div class="highlight"><pre><span></span><code><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">fetchResourceTree</span><span class="p">(</span><span class="nx">resourceType</span><span class="p">,</span><span class="w"> </span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="nx">visited</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Set</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="nx">resourceType</span><span class="si">}</span><span class="sb">/</span><span class="si">${</span><span class="nx">id</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">visited</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">key</span><span class="p">))</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span><span class="w"> </span><span class="c1">// Already visited</span>

<span class="w">  </span><span class="nx">visited</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">resource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="sb">`/</span><span class="si">${</span><span class="nx">resourceType</span><span class="si">}</span><span class="sb">/</span><span class="si">${</span><span class="nx">id</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// Process references</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">references</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">extractReferences</span><span class="p">(</span><span class="nx">resource</span><span class="p">);</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="nx">ref</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">references</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">refType</span><span class="p">,</span><span class="w"> </span><span class="nx">refId</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ref</span><span class="p">.</span><span class="nx">reference</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">'/'</span><span class="p">);</span>
<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">fetchResourceTree</span><span class="p">(</span><span class="nx">refType</span><span class="p">,</span><span class="w"> </span><span class="nx">refId</span><span class="p">,</span><span class="w"> </span><span class="nx">visited</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">resource</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<hr/>
<h2 id="next-steps">Next Steps</h2>
<p>Now that you understand how resources connect, let's see how they're grouped and transmitted together.</p>
<p>→ <a href="../deepdive-fhir-resource-bundles/">FHIR Resource Bundles</a></p>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: FHIR Data Fundamentals" class="md-footer__link md-footer__link--prev" href="../../eh-dd-02-fhir-data-fundamentals/">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</div>
<div class="md-footer__title">
<span class="md-footer__direction">
                Previous
              </span>
<div class="md-ellipsis">
                FHIR Data Fundamentals
              </div>
</div>
</a>
<a aria-label="Next: FHIR Comprehensive Resource Relationships" class="md-footer__link md-footer__link--next" href="../deepdive-fhir-resource-relationships-comprehensive/">
<div class="md-footer__title">
<span class="md-footer__direction">
                Next
              </span>
<div class="md-ellipsis">
                FHIR Comprehensive Resource Relationships
              </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<div class="md-consent" data-md-component="consent" hidden="" id="__consent">
<div class="md-consent__overlay"></div>
<aside class="md-consent__inner">
<form class="md-consent__form md-grid md-typeset" name="consent">
<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.
</p>
<input class="md-toggle" id="__settings" type="checkbox"/>
<div class="md-consent__settings">
<ul class="task-list">
<li class="task-list-item">
<label class="task-list-control">
<input checked="" name="analytics" type="checkbox"/>
<span class="task-list-indicator"></span>
          Google Analytics
        </label>
</li>
</ul>
</div>
<div class="md-consent__controls">
<button class="md-button md-button--primary">Accept</button>
<label class="md-button" for="__settings">Manage settings</label>
</div>
</form>
</aside>
</div>
<script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
<script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.top", "navigation.footer", "navigation.indexes", "search.highlight", "search.suggest", "search.share", "content.code.copy", "content.code.select"], "search": "../../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../../../../assets/javascripts/bundle.525ec568.min.js"></script>
<script src="../../../../js/diagram-utils.js"></script>
<script src="../../../../js/seamaiden.js"></script>
<script src="../../../../js/diagram-theme-switcher.js"></script>
<script src="../../../../js/diagram-zoom.js"></script>
<script src="../../../../js/open_in_new_tab.js"></script>
<script src="../../../../assets/mkdocs_puml/puml.js"></script>
<script src="https://unpkg.com/@panzoom/panzoom@4.5.1/dist/panzoom.min.js"></script>
<script src="../../../../assets/mkdocs_puml/interaction.js"></script>
<script src="../../../../js/mermaid.min.js"></script><script>mermaid.initialize({});</script><script>document$.subscribe(() => {
            window.update_swagger_ui_iframe_height = function (id) {
                var iFrameID = document.getElementById(id);
                if (iFrameID) {
                    full_height = (iFrameID.contentWindow.document.body.scrollHeight + 80) + "px";
                    iFrameID.height = full_height;
                    iFrameID.style.height = full_height;
                }
            }
        
            let iframe_id_list = []
            var iframes = document.getElementsByClassName("swagger-ui-iframe");
            for (var i = 0; i < iframes.length; i++) { 
                iframe_id_list.push(iframes[i].getAttribute("id"))
            }
        
            let ticking = true;
            
            document.addEventListener('scroll', function(e) {
                if (!ticking) {
                    window.requestAnimationFrame(()=> {
                        let half_vh = window.innerHeight/2;
                        for(var i = 0; i < iframe_id_list.length; i++) {
                            let element = document.getElementById(iframe_id_list[i])
                            if(element==null){
                                return
                            }
                            let diff = element.getBoundingClientRect().top
                            if(element.contentWindow.update_top_val){
                                element.contentWindow.update_top_val(half_vh - diff)
                            }
                        }
                        ticking = false;
                    });
                    ticking = true;
                }
            });
        
            const dark_scheme_name = "slate"
            
            window.scheme = document.body.getAttribute("data-md-color-scheme")
            const options = {
                attributeFilter: ['data-md-color-scheme'],
            };
            function color_scheme_callback(mutations) {
                for (let mutation of mutations) {
                    if (mutation.attributeName === "data-md-color-scheme") {
                        scheme = document.body.getAttribute("data-md-color-scheme")
                        var iframe_list = document.getElementsByClassName("swagger-ui-iframe")
                        for(var i = 0; i < iframe_list.length; i++) {
                            var ele = iframe_list.item(i);
                            if (ele) {
                                if (scheme === dark_scheme_name) {
                                    ele.contentWindow.enable_dark_mode();
                                } else {
                                    ele.contentWindow.disable_dark_mode();
                                }
                            }
                        }
                    }
                }
            }
            observer = new MutationObserver(color_scheme_callback);
            observer.observe(document.body, options);
            })</script></body>
</html>