
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="https://cassmastern.github.io/cass-sandbox/sec_ehealth/sec_deepdive/eh-dd-03-fhir-resource-relationships/deepdive-fhir-resource-bundles/" rel="canonical"/>
<link href="../deepdive-fhir-resource-relationships-comprehensive/" rel="prev"/>
<link href="../" rel="next"/>
<link href="../../../../img/favicon.ico" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.5.39" name="generator"/>
<title>FHIR Resource Bundles - Ler's Sandbox</title>
<link href="../../../../assets/stylesheets/main.8c3ca2c6.min.css" rel="stylesheet"/>
<link href="../../../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../../../css/alphabet.css" rel="stylesheet"/>
<link href="../../../../css/diagram-zoom.css" rel="stylesheet"/>
<link href="../../../../css/cm-logo.css" rel="stylesheet"/>
<link href="../../../../css/color-vars.css" rel="stylesheet"/>
<link href="../../../../css/custom-theme-colors.css" rel="stylesheet"/>
<link href="../../../../assets/mkdocs_puml/puml.css" rel="stylesheet"/>
<link href="../../../../assets/mkdocs_puml/interaction.css" rel="stylesheet"/>
<script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-GD2XWDMP2E"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-GD2XWDMP2E",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-GD2XWDMP2E",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
<script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script>
</head>
<body data-md-color-accent="custom" data-md-color-primary="custom" data-md-color-scheme="slate" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#fhir-resource-bundles">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Ler's Sandbox" class="md-header__button md-logo" data-md-component="logo" href="../../../.." title="Ler's Sandbox">
<img alt="logo" src="../../../../img/logo.svg"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Ler's Sandbox
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              FHIR Resource Bundles
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="custom" data-md-color-media="" data-md-color-primary="custom" data-md-color-scheme="slate" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="custom" data-md-color-media="" data-md-color-primary="custom" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<a aria-label="Share" class="md-search__icon md-icon" data-clipboard="" data-clipboard-text="" data-md-component="search-share" href="javascript:void(0)" tabindex="-1" title="Share">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"></path></svg>
</a>
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
<div class="md-search__suggest" data-md-component="search-suggest"></div>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Ler's Sandbox" class="md-nav__button md-logo" data-md-component="logo" href="../../../.." title="Ler's Sandbox">
<img alt="logo" src="../../../../img/logo.svg"/>
</a>
    Ler's Sandbox
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../..">
<span class="md-ellipsis">
    HOME
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../sec_about/">
<span class="md-ellipsis">
    ABOUT THIS WEBSITE
  </span>
</a>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            ABOUT THIS WEBSITE
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_about/whatsinhere/">
<span class="md-ellipsis">
    What's in Here?
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_about/roadmap/">
<span class="md-ellipsis">
    Roadmap &amp; Changelog
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_about/feedback/">
<span class="md-ellipsis">
    Feedback
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../sec_cloud/">
<span class="md-ellipsis">
    IN THE CLOUDS
  </span>
</a>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            IN THE CLOUDS
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_cloud/aws-gcp-azure/">
<span class="md-ellipsis">
    Architectures of AWS, GCP, and Azure
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_cloud/aws-gcp-azure_glossary/">
<span class="md-ellipsis">
    Cross-Platform Cloud &amp; DevOps Glossary (AWS, GCP, Azure)
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_cloud/aws-gcp-azure_glossary_enhanced/">
<span class="md-ellipsis">
    Cross-Platform Cloud &amp; DevOps Glossary (AWS, GCP, Azure) — Enhanced
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_cloud/jakarta-ee-azure/">
<span class="md-ellipsis">
    A Jakarta Enterprise Application on Azure
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../sec_accss/">
<span class="md-ellipsis">
    ACCESSIBILITY
  </span>
</a>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            ACCESSIBILITY
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_accss/accss_/">
<span class="md-ellipsis">
    Accessibility Reference
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_accss/visuals-for-the-sightless/">
<span class="md-ellipsis">
    Visuals for the Sightless
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_accss/accss_diagram-dilemma/">
<span class="md-ellipsis">
    The Diagramming Dilemma
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_accss/mermaid-beyond-reach/">
<span class="md-ellipsis">
    An Accessible Mermaid Beyond Reach
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_accss/mermaid-captured/">
<span class="md-ellipsis">
    Mermaid Captured
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_accss/mkdocs-mermaid-plantuml-graphviz/">
<span class="md-ellipsis">
    Diagram Accessibility: Current State/Path Forward
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../sec_freeform/">
<span class="md-ellipsis">
    CONCEPTS, ESSAYS, ETC.
  </span>
</a>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            CONCEPTS, ESSAYS, ETC.
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_freeform/ibm-sanfran/">
<span class="md-ellipsis">
    IBM SanFrancisco
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_freeform/ai-accessibility/">
<span class="md-ellipsis">
    Accessibility with AI
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_freeform/ai-accessibility_bus/">
<span class="md-ellipsis">
    Accessibility with AI (Concept Note)
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_freeform/gen-ai-landscape-primer/">
<span class="md-ellipsis">
    GenAI Landscape in 2025
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_freeform/identity/">
<span class="md-ellipsis">
    The Long Arc of Digital Identity
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../sec_net-sec/">
<span class="md-ellipsis">
    NETWORKS &amp; SECURITY
  </span>
</a>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            NETWORKS &amp; SECURITY
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_net-sec/network_data_center/">
<span class="md-ellipsis">
    A Hypothetical Data Centre Network
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_net-sec/network_data_center_stride/">
<span class="md-ellipsis">
    Network Security and Threat Modeling — STRIDE
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_net-sec/network_data_center_mitre/">
<span class="md-ellipsis">
    Network Security and Threat Modeling — MITRE ATT&amp;CK
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_net-sec/saml-admin/">
<span class="md-ellipsis">
    Single Sign-On (SSO) Admin Guide — SAML 2.0 Integration
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_7" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../">
<span class="md-ellipsis">
    eHEALTH
  </span>
</a>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
            eHEALTH
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_7_1" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../">
<span class="md-ellipsis">
    SMART-on-FHIR Deep Dive
  </span>
</a>
<label class="md-nav__link" for="__nav_7_1" id="__nav_7_1_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_7_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_7_1">
<span class="md-nav__icon md-icon"></span>
            SMART-on-FHIR Deep Dive
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7_1_1" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../eh-dd-01-foundations/">
<span class="md-ellipsis">
    An Introduction to FHIR
  </span>
</a>
<label class="md-nav__link" for="__nav_7_1_1" id="__nav_7_1_1_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_7_1_1_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_7_1_1">
<span class="md-nav__icon md-icon"></span>
            An Introduction to FHIR
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-01-foundations/deepdive-overview/">
<span class="md-ellipsis">
    Overview of SMART-on-FHIR
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-01-foundations/deepdive-overview-fhir-arch/">
<span class="md-ellipsis">
    SMART-on-FHIR Architecture Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-01-foundations/deepdive-overview-fhir-resources/">
<span class="md-ellipsis">
    Key FHIR Resources
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7_1_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../eh-dd-02-fhir-data-fundamentals/">
<span class="md-ellipsis">
    FHIR Data Fundamentals
  </span>
</a>
<label class="md-nav__link" for="__nav_7_1_2" id="__nav_7_1_2_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_7_1_2_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_7_1_2">
<span class="md-nav__icon md-icon"></span>
            FHIR Data Fundamentals
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-02-fhir-data-fundamentals/deepdive-fhir-data-types/">
<span class="md-ellipsis">
    FHIR Data Types
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-02-fhir-data-fundamentals/deepdive-fhir-code-systems/">
<span class="md-ellipsis">
    FHIR Terminology Standards
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-02-fhir-data-fundamentals/deepdive-fhir-cardinality/">
<span class="md-ellipsis">
    FHIR Resource Cardinality
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-02-fhir-data-fundamentals/deepdive-complete-resource-example/">
<span class="md-ellipsis">
    Complete FHIR Resource Example
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_7_1_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../">
<span class="md-ellipsis">
    FHIR Resource Relationships
  </span>
</a>
<label class="md-nav__link" for="__nav_7_1_3" id="__nav_7_1_3_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_7_1_3_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_7_1_3">
<span class="md-nav__icon md-icon"></span>
            FHIR Resource Relationships
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../deepdive-fhir-resource-relationships/">
<span class="md-ellipsis">
    FHIR Resource Relationships
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../deepdive-fhir-resource-relationships-comprehensive/">
<span class="md-ellipsis">
    FHIR Comprehensive Resource Relationships
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    FHIR Resource Bundles
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    FHIR Resource Bundles
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#what-are-bundles">
<span class="md-ellipsis">
      What Are Bundles?
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#bundle-types-and-structures-matrix-diagram">
<span class="md-ellipsis">
      Bundle Types and Structures Matrix (Diagram)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#bundle-types-the-five-patterns">
<span class="md-ellipsis">
      Bundle Types: The Five Patterns
    </span>
</a>
<nav aria-label="Bundle Types: The Five Patterns" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1-searchset-search-results">
<span class="md-ellipsis">
      1. searchset - Search Results
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2-transaction-atomic-operations">
<span class="md-ellipsis">
      2. transaction - Atomic Operations
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3-batch-independent-operations">
<span class="md-ellipsis">
      3. batch - Independent Operations
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4-document-clinical-documents">
<span class="md-ellipsis">
      4. document - Clinical Documents
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#5-message-event-notifications">
<span class="md-ellipsis">
      5. message - Event Notifications
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#working-with-bundles-practical-patterns">
<span class="md-ellipsis">
      Working with Bundles: Practical Patterns
    </span>
</a>
<nav aria-label="Working with Bundles: Practical Patterns" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#pattern-1-processing-search-results">
<span class="md-ellipsis">
      Pattern 1: Processing Search Results
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pattern-2-building-transaction-bundles">
<span class="md-ellipsis">
      Pattern 2: Building Transaction Bundles
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pattern-3-extracting-transaction-results">
<span class="md-ellipsis">
      Pattern 3: Extracting Transaction Results
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pattern-4-bundle-size-management">
<span class="md-ellipsis">
      Pattern 4: Bundle Size Management
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pattern-5-resolving-references-within-bundles">
<span class="md-ellipsis">
      Pattern 5: Resolving References Within Bundles
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#bundle-validation-checklist">
<span class="md-ellipsis">
      Bundle Validation Checklist
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#common-bundle-errors">
<span class="md-ellipsis">
      Common Bundle Errors
    </span>
</a>
<nav aria-label="Common Bundle Errors" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#error-1-wrong-bundle-type">
<span class="md-ellipsis">
      Error 1: Wrong Bundle Type
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#error-2-unresolved-temporary-reference">
<span class="md-ellipsis">
      Error 2: Unresolved Temporary Reference
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#error-3-batch-vs-transaction-confusion">
<span class="md-ellipsis">
      Error 3: Batch vs. Transaction Confusion
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#next-steps">
<span class="md-ellipsis">
      Next Steps
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7_1_4" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../eh-dd-04-working-with-fhir-apis/">
<span class="md-ellipsis">
    FHIR Resource APIs
  </span>
</a>
<label class="md-nav__link" for="__nav_7_1_4" id="__nav_7_1_4_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_7_1_4_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_7_1_4">
<span class="md-nav__icon md-icon"></span>
            FHIR Resource APIs
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-04-working-with-fhir-apis/deepdive-fhir-rest-common-ops/">
<span class="md-ellipsis">
    Common FHIR REST Operations
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-04-working-with-fhir-apis/deepdive-fhir-search-parameters/">
<span class="md-ellipsis">
    FHIR Search Parameters
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-04-working-with-fhir-apis/deepdive-error-handling/">
<span class="md-ellipsis">
    Error Handling and OperationOutcome
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-04-working-with-fhir-apis/deepdive-fhir-validation/">
<span class="md-ellipsis">
    FHIR Validation
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7_1_5" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../eh-dd-05-advanced-fhir-concepts/">
<span class="md-ellipsis">
    Advanced FHIR Concepts
  </span>
</a>
<label class="md-nav__link" for="__nav_7_1_5" id="__nav_7_1_5_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_7_1_5_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_7_1_5">
<span class="md-nav__icon md-icon"></span>
            Advanced FHIR Concepts
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-05-advanced-fhir-concepts/deepdive-fhir-profiles-and-extensions/">
<span class="md-ellipsis">
    FHIR Profiles and Extensions
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7_1_6" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../eh-dd-06-smart-auth/">
<span class="md-ellipsis">
    SMART Authorization
  </span>
</a>
<label class="md-nav__link" for="__nav_7_1_6" id="__nav_7_1_6_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_7_1_6_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_7_1_6">
<span class="md-nav__icon md-icon"></span>
            SMART Authorization
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-06-smart-auth/deepdive-oauth-flow/">
<span class="md-ellipsis">
    OAuth 2.0 Flow
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-06-smart-auth/deepdive-smart-launch-flow/">
<span class="md-ellipsis">
    SMART Launch Flow
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-06-smart-auth/deepdive-smart-scopes-and-auth/">
<span class="md-ellipsis">
    SMART Scopes and Authorization
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-06-smart-auth/deepdive-smart-config-discovery/">
<span class="md-ellipsis">
    SMART Configuration Discovery
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-06-smart-auth/deepdive-security-and-access-control/">
<span class="md-ellipsis">
    Security and Access Control
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7_1_7" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../eh-dd-07-hands-on-practice/">
<span class="md-ellipsis">
    Hands-On
  </span>
</a>
<label class="md-nav__link" for="__nav_7_1_7" id="__nav_7_1_7_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_7_1_7_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_7_1_7">
<span class="md-nav__icon md-icon"></span>
            Hands-On
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-07-hands-on-practice/deepdive-smart-health-it-sandbox/">
<span class="md-ellipsis">
    Using the SMART Health IT Sandbox
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-07-hands-on-practice/deepdive-smart_client_impl-sample-app/">
<span class="md-ellipsis">
    Practical Example: Building a SMART App
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-07-hands-on-practice/deepdive-smart_client_impl/">
<span class="md-ellipsis">
    SMART Client Implementation (Python)
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-07-hands-on-practice/deepdive-smart_client_impl-practical-code-examples/">
<span class="md-ellipsis">
    Practical Code Examples
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-07-hands-on-practice/deepdive-testing-and-debugging/">
<span class="md-ellipsis">
    Testing and Debugging
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7_1_8" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../eh-dd-08-wrap-up/">
<span class="md-ellipsis">
    Wrap-Up
  </span>
</a>
<label class="md-nav__link" for="__nav_7_1_8" id="__nav_7_1_8_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_7_1_8_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_7_1_8">
<span class="md-nav__icon md-icon"></span>
            Wrap-Up
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-08-wrap-up/deepdive-key-takeaways/">
<span class="md-ellipsis">
    Deepdive key takeaways
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../eh-dd-08-wrap-up/deepdive-summary/">
<span class="md-ellipsis">
    Summary
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../sec_integration/">
<span class="md-ellipsis">
    SMART-on-FHIR Integration
  </span>
</a>
<label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_7_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_7_2">
<span class="md-nav__icon md-icon"></span>
            SMART-on-FHIR Integration
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../sec_integration/quick_ref/">
<span class="md-ellipsis">
    SMART-on-FHIR and Integration Quick Reference
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../sec_integration/smart-fhir-visuals/">
<span class="md-ellipsis">
    SMART-on-FHIR and Integration — Visuals
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../sec_integration/gloss_ontario_halo/">
<span class="md-ellipsis">
    Ontario eHealth &amp; HALO Integration Glossary
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../sec_api/">
<span class="md-ellipsis">
    API DOCUMENTATION
  </span>
</a>
<label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
            API DOCUMENTATION
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8_1" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../sec_api/sec_api_countries/">
<span class="md-ellipsis">
    COUNTRIES REST API
  </span>
</a>
<label class="md-nav__link" for="__nav_8_1" id="__nav_8_1_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_8_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_8_1">
<span class="md-nav__icon md-icon"></span>
            COUNTRIES REST API
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_api/sec_api_countries/api-countries-overview/">
<span class="md-ellipsis">
    Overview
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8_1_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../sec_api/sec_api_countries/sec_api_countries_guides/">
<span class="md-ellipsis">
    Guides
  </span>
</a>
<label class="md-nav__link" for="__nav_8_1_2" id="__nav_8_1_2_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_8_1_2_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_8_1_2">
<span class="md-nav__icon md-icon"></span>
            Guides
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_api/sec_api_countries/sec_api_countries_guides/api-countries-guides-quickstart/">
<span class="md-ellipsis">
    Quick Start Guide
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_api/sec_api_countries/sec_api_countries_guides/api-countries-guides-filtering/">
<span class="md-ellipsis">
    Advanced Filtering
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_api/sec_api_countries/sec_api_countries_guides/api-countries-guides-integration/">
<span class="md-ellipsis">
    Integration Patterns
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8_1_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../sec_api/sec_api_countries/sec_api_countries_examples/">
<span class="md-ellipsis">
    Examples
  </span>
</a>
<label class="md-nav__link" for="__nav_8_1_3" id="__nav_8_1_3_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_8_1_3_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_8_1_3">
<span class="md-nav__icon md-icon"></span>
            Examples
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_api/sec_api_countries/sec_api_countries_examples/api-countries-examples-javascript/">
<span class="md-ellipsis">
    JavaScript Examples
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_api/sec_api_countries/sec_api_countries_examples/api-countries-examples-python/">
<span class="md-ellipsis">
    Python Examples
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_api/sec_api_countries/sec_api_countries_examples/api-countries-examples-usecases/">
<span class="md-ellipsis">
    Real-World Use Cases
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_api/sec_api_countries/reference/">
<span class="md-ellipsis">
    Interactive OpenAPI (Swagger) Reference
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_api/sec_api_countries/resources/">
<span class="md-ellipsis">
    Resources &amp; Support
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../sec_api/sec_api_stripe/">
<span class="md-ellipsis">
    STRIPE PAYMENT API
  </span>
</a>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_8_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_8_2">
<span class="md-nav__icon md-icon"></span>
            STRIPE PAYMENT API
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_9" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../sec_cheatsheets/">
<span class="md-ellipsis">
    CHEAT SHEETS
  </span>
</a>
<label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_9_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_9">
<span class="md-nav__icon md-icon"></span>
            CHEAT SHEETS
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_cheatsheets/cheatsheet-docker/">
<span class="md-ellipsis">
    Docker Command Cheatsheet
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_cheatsheets/cheatsheet-kubectl/">
<span class="md-ellipsis">
    Kubectl Command Cheat Sheet
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_cheatsheets/cheatsheet_compound-modifiers/">
<span class="md-ellipsis">
    Compound Modifiers Cheat Sheet
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_10" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../sec_gloss/">
<span class="md-ellipsis">
    GLOSSARIES
  </span>
</a>
<label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_10_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_10">
<span class="md-nav__icon md-icon"></span>
            GLOSSARIES
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_gloss/gloss_oss/">
<span class="md-ellipsis">
    Glossary of OSS Terms
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_gloss/gloss_networking/">
<span class="md-ellipsis">
    Glossary of Networking Terms
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_gloss/gloss_kuber/">
<span class="md-ellipsis">
    Glossary of Kubernetes Terms
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec_gloss/gloss_cloud-native/">
<span class="md-ellipsis">
    Glossary of Cloud-Native Terms
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_11" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../sec__sandbox/">
<span class="md-ellipsis">
    Sec  sandbox
  </span>
</a>
<label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_11_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_11">
<span class="md-nav__icon md-icon"></span>
            Sec  sandbox
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec__sandbox/dia-graphviz/">
<span class="md-ellipsis">
    Graphviz Diagrams
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec__sandbox/dia-mermaid/">
<span class="md-ellipsis">
    Mermaid Diagrams
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec__sandbox/dia-plantuml/">
<span class="md-ellipsis">
    PlantUML Diagrams
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec__sandbox/md-extensions/">
<span class="md-ellipsis">
    Markdown Extensions
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../sec__sandbox/dia-three-in-one/">
<span class="md-ellipsis">
    Three Diagrams in One Markdown
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#what-are-bundles">
<span class="md-ellipsis">
      What Are Bundles?
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#bundle-types-and-structures-matrix-diagram">
<span class="md-ellipsis">
      Bundle Types and Structures Matrix (Diagram)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#bundle-types-the-five-patterns">
<span class="md-ellipsis">
      Bundle Types: The Five Patterns
    </span>
</a>
<nav aria-label="Bundle Types: The Five Patterns" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1-searchset-search-results">
<span class="md-ellipsis">
      1. searchset - Search Results
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2-transaction-atomic-operations">
<span class="md-ellipsis">
      2. transaction - Atomic Operations
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3-batch-independent-operations">
<span class="md-ellipsis">
      3. batch - Independent Operations
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4-document-clinical-documents">
<span class="md-ellipsis">
      4. document - Clinical Documents
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#5-message-event-notifications">
<span class="md-ellipsis">
      5. message - Event Notifications
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#working-with-bundles-practical-patterns">
<span class="md-ellipsis">
      Working with Bundles: Practical Patterns
    </span>
</a>
<nav aria-label="Working with Bundles: Practical Patterns" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#pattern-1-processing-search-results">
<span class="md-ellipsis">
      Pattern 1: Processing Search Results
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pattern-2-building-transaction-bundles">
<span class="md-ellipsis">
      Pattern 2: Building Transaction Bundles
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pattern-3-extracting-transaction-results">
<span class="md-ellipsis">
      Pattern 3: Extracting Transaction Results
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pattern-4-bundle-size-management">
<span class="md-ellipsis">
      Pattern 4: Bundle Size Management
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pattern-5-resolving-references-within-bundles">
<span class="md-ellipsis">
      Pattern 5: Resolving References Within Bundles
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#bundle-validation-checklist">
<span class="md-ellipsis">
      Bundle Validation Checklist
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#common-bundle-errors">
<span class="md-ellipsis">
      Common Bundle Errors
    </span>
</a>
<nav aria-label="Common Bundle Errors" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#error-1-wrong-bundle-type">
<span class="md-ellipsis">
      Error 1: Wrong Bundle Type
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#error-2-unresolved-temporary-reference">
<span class="md-ellipsis">
      Error 2: Unresolved Temporary Reference
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#error-3-batch-vs-transaction-confusion">
<span class="md-ellipsis">
      Error 3: Batch vs. Transaction Confusion
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#next-steps">
<span class="md-ellipsis">
      Next Steps
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="fhir-resource-bundles">FHIR Resource Bundles</h1>
<h2 id="what-are-bundles">What Are Bundles?</h2>
<p>A Bundle is FHIR's container for grouping multiple resources together. Think of it as an envelope that holds related resources and metadata about how they should be processed. Bundles solve several critical problems:</p>
<ul>
<li><strong>Search results</strong>: Return multiple matching resources in one HTTP response</li>
<li><strong>Batch operations</strong>: Submit multiple create/update/delete requests atomically</li>
<li><strong>Documents</strong>: Package a complete clinical document with all referenced resources</li>
<li><strong>Messages</strong>: Send event notifications with relevant context</li>
<li><strong>Data export</strong>: Transfer large datasets efficiently</li>
</ul>
<p>Without bundles, apps would need hundreds of individual HTTP requests to fetch a patient's complete record. Bundles reduce network round-trips and enable atomic transactions.</p>
<h2 id="bundle-types-and-structures-matrix-diagram">Bundle Types and Structures Matrix (Diagram)</h2>
<p>The following is a diagram of bundle types and structures for visual reference.</p>
<blockquote>
<p>diagram version1 (TBD::archive)</p>
</blockquote>
<div class="mermaid">graph TD
    Bundle[Bundle Resource]

    Bundle --&gt; Type[type]
    Bundle --&gt; Total[total]
    Bundle --&gt; Link[link array]
    Bundle --&gt; Entry[entry array]

    Type --&gt; TypeSearch[searchset]
    Type --&gt; TypeBatch[batch]
    Type --&gt; TypeTransaction[transaction]
    Type --&gt; TypeHistory[history]
    Type --&gt; TypeCollection[collection]
    Type --&gt; TypeDocument[document]

    Link --&gt; LinkSelf[self]
    Link --&gt; LinkNext[next]
    Link --&gt; LinkPrev[previous]
    Link --&gt; LinkFirst[first]
    Link --&gt; LinkLast[last]

    Entry --&gt; FullUrl[fullUrl]
    Entry --&gt; Resource[resource]
    Entry --&gt; Search[search]
    Entry --&gt; Request[request]
    Entry --&gt; Response[response]

    Search --&gt; SearchMode[mode: match/include]
    Search --&gt; SearchScore[score]

    Request --&gt; ReqMethod[method: GET/POST/PUT/DELETE]
    Request --&gt; ReqUrl[url]
    Request --&gt; ReqIfMatch[ifMatch]
    Request --&gt; ReqIfNoneExist[ifNoneExist]

    Response --&gt; RespStatus[status]
    Response --&gt; RespLocation[location]
    Response --&gt; RespEtag[etag]
    Response --&gt; RespLastMod[lastModified]
</div>
<blockquote>
<p>diagram version2 (TBD::placement)</p>
</blockquote>
<div class="puml-container"><div class="puml light" style=""><svg class="diagram" contentstyletype="text/css" data-diagram-type="CLASS" height="505px" preserveaspectratio="xMidYMid meet" style="width:1158px;height:505px;background:#FFFFFF;" version="1.1" viewbox="0 0 1158 505" width="1158px" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" zoomandpan="magnify"><defs></defs><g><g class="entity" data-entity="Bundle" data-source-line="12" data-uid="ent0002" id="entity_Bundle"><rect fill="#F1F1F1" height="107.4844" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="218.1787" x="152.45" y="7"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="48.7402" x="237.1692" y="24.9951">Bundle</text><line style="stroke:#181818;stroke-width:0.5;" x1="153.45" x2="369.6287" y1="33.2969" y2="33.2969"></line><ellipse cx="163.45" cy="46.9453" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="173.5576" x="172.45" y="50.292">type : code «REQUIRED»</text><ellipse cx="163.45" cy="63.2422" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="137.8398" x="172.45" y="66.5889">total : integer [0..1]</text><ellipse cx="163.45" cy="79.5391" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="171.3428" x="172.45" y="82.8857">link[] : Bundle.Link [0..*]</text><ellipse cx="163.45" cy="95.8359" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="192.1787" x="172.45" y="99.1826">entry[] : Bundle.Entry [0..*]</text><line style="stroke:#181818;stroke-width:0.5;" x1="153.45" x2="369.6287" y1="106.4844" y2="106.4844"></line></g><g class="entity" data-entity="Type" data-source-line="19" data-uid="ent0003" id="entity_Type"><rect fill="#F1F1F1" height="140.0781" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="105.085" x="7" y="174.48"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="87.5273" x="15.7788" y="192.4751">Bundle.Type</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="111.085" y1="200.7769" y2="200.7769"></line><ellipse cx="18" cy="214.4253" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="68.209" x="27" y="217.772">searchset</text><ellipse cx="18" cy="230.7222" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="39.5254" x="27" y="234.0689">batch</text><ellipse cx="18" cy="247.0191" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="79.085" x="27" y="250.3657">transaction</text><ellipse cx="18" cy="263.3159" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="48.1523" x="27" y="266.6626">history</text><ellipse cx="18" cy="279.6128" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="67.1699" x="27" y="282.9595">collection</text><ellipse cx="18" cy="295.9097" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="70.6357" x="27" y="299.2564">document</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="111.085" y1="306.5581" y2="306.5581"></line></g><g class="entity" data-entity="Link" data-source-line="28" data-uid="ent0004" id="entity_Link"><rect fill="#F1F1F1" height="74.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="228.3643" x="147.36" y="207.07"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="81.8604" x="220.612" y="225.0651">Bundle.Link</text><line style="stroke:#181818;stroke-width:0.5;" x1="148.36" x2="374.7243" y1="233.3669" y2="233.3669"></line><ellipse cx="158.36" cy="247.0153" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="202.3643" x="167.36" y="250.362">relation : string «REQUIRED»</text><ellipse cx="158.36" cy="263.3122" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="145.5576" x="167.36" y="266.6589">url : uri «REQUIRED»</text><line style="stroke:#181818;stroke-width:0.5;" x1="148.36" x2="374.7243" y1="273.9606" y2="273.9606"></line></g><g class="entity" data-entity="LinkRel" data-source-line="33" data-uid="ent0005" id="entity_LinkRel"><rect fill="#F1F1F1" height="123.7813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="96.7471" x="146.17" y="374.56"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="90.7471" x="149.17" y="392.5551">Link.Relation</text><line style="stroke:#181818;stroke-width:0.5;" x1="147.17" x2="241.9171" y1="400.8569" y2="400.8569"></line><ellipse cx="157.17" cy="414.5053" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="24.7256" x="166.17" y="417.852">self</text><ellipse cx="157.17" cy="430.8022" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="31.2607" x="166.17" y="434.1489">next</text><ellipse cx="157.17" cy="447.0991" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="60.1631" x="166.17" y="450.4457">previous</text><ellipse cx="157.17" cy="463.3959" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="27.3574" x="166.17" y="466.7426">first</text><ellipse cx="157.17" cy="479.6928" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="25.252" x="166.17" y="483.0395">last</text><line style="stroke:#181818;stroke-width:0.5;" x1="147.17" x2="241.9171" y1="490.3413" y2="490.3413"></line></g><g class="entity" data-entity="Entry" data-source-line="41" data-uid="ent0006" id="entity_Entry"><rect fill="#F1F1F1" height="123.7813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="266.6592" x="544.21" y="182.63"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="90.4395" x="632.3199" y="200.6251">Bundle.Entry</text><line style="stroke:#181818;stroke-width:0.5;" x1="545.21" x2="809.8692" y1="208.9269" y2="208.9269"></line><ellipse cx="555.21" cy="222.5753" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="115.6982" x="564.21" y="225.922">fullUrl : uri [0..1]</text><ellipse cx="555.21" cy="238.8722" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="182.0137" x="564.21" y="242.2189">resource : Resource [0..1]</text><ellipse cx="555.21" cy="255.1691" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="204.1143" x="564.21" y="258.5157">search : Bundle.Search [0..1]</text><ellipse cx="555.21" cy="271.4659" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="219.9189" x="564.21" y="274.8126">request : Bundle.Request [0..1]</text><ellipse cx="555.21" cy="287.7628" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="240.6592" x="564.21" y="291.1095">response : Bundle.Response [0..1]</text><line style="stroke:#181818;stroke-width:0.5;" x1="545.21" x2="809.8692" y1="298.4113" y2="298.4113"></line></g><g class="entity" data-entity="Search" data-source-line="49" data-uid="ent0007" id="entity_Search"><rect fill="#F1F1F1" height="74.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="276.4688" x="278.31" y="399"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="101.5957" x="365.7465" y="416.9951">Bundle.Search</text><line style="stroke:#181818;stroke-width:0.5;" x1="279.31" x2="553.7788" y1="425.2969" y2="425.2969"></line><ellipse cx="289.31" cy="438.9453" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="250.4688" x="298.31" y="442.292">mode : code [0..1] «match/include»</text><ellipse cx="289.31" cy="455.2422" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="148.8252" x="298.31" y="458.5889">score : decimal [0..1]</text><line style="stroke:#181818;stroke-width:0.5;" x1="279.31" x2="553.7788" y1="465.8906" y2="465.8906"></line></g><g class="entity" data-entity="Request" data-source-line="54" data-uid="ent0008" id="entity_Request"><rect fill="#F1F1F1" height="107.4844" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="309.2334" x="589.93" y="382.71"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="110.6875" x="689.2029" y="400.7051">Bundle.Request</text><line style="stroke:#181818;stroke-width:0.5;" x1="590.93" x2="898.1634" y1="409.0069" y2="409.0069"></line><ellipse cx="600.93" cy="422.6553" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="283.2334" x="609.93" y="426.002">method : code «GET/POST/PUT/DELETE»</text><ellipse cx="600.93" cy="438.9522" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="145.5576" x="609.93" y="442.2989">url : uri «REQUIRED»</text><ellipse cx="600.93" cy="455.2491" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="147.4307" x="609.93" y="458.5957">ifMatch : string [0..1]</text><ellipse cx="600.93" cy="471.5459" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="175.041" x="609.93" y="474.8926">ifNoneExist : string [0..1]</text><line style="stroke:#181818;stroke-width:0.5;" x1="590.93" x2="898.1634" y1="482.1944" y2="482.1944"></line></g><g class="entity" data-entity="Response" data-source-line="61" data-uid="ent0009" id="entity_Response"><rect fill="#F1F1F1" height="107.4844" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="217.7275" x="933.68" y="382.71"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="121.0576" x="982.015" y="400.7051">Bundle.Response</text><line style="stroke:#181818;stroke-width:0.5;" x1="934.68" x2="1150.4075" y1="409.0069" y2="409.0069"></line><ellipse cx="944.68" cy="422.6553" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="191.7275" x="953.68" y="426.002">status : string «REQUIRED»</text><ellipse cx="944.68" cy="438.9522" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="129.7734" x="953.68" y="442.2989">location : uri [0..1]</text><ellipse cx="944.68" cy="455.2491" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="127.4629" x="953.68" y="458.5957">etag : string [0..1]</text><ellipse cx="944.68" cy="471.5459" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="189.1846" x="953.68" y="474.8926">lastModified : instant [0..1]</text><line style="stroke:#181818;stroke-width:0.5;" x1="934.68" x2="1150.4075" y1="482.1944" y2="482.1944"></line></g><g class="link" data-entity-1="Bundle" data-entity-2="Type" data-source-line="69" data-uid="lnk10" id="link_Bundle_Type"><path codeline="69" d="M151.97,60.34 C104.48,60.34 59.54,60.34 59.54,60.34 C59.54,60.34 59.54,116.11 59.54,168.1" fill="none" id="Bundle-to-Type" style="stroke:#181818;stroke-width:1;"></path><polygon fill="#181818" points="59.54,174.1,63.54,165.1,59.54,169.1,55.54,165.1,59.54,174.1" style="stroke:#181818;stroke-width:1;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacing" textlength="29.0405" x="29.54" y="67.0769">type</text></g><g class="link" data-entity-1="Bundle" data-entity-2="Link" data-source-line="70" data-uid="lnk11" id="link_Bundle_Link"><path codeline="70" d="M225.18,114.88 C225.18,144.43 225.18,174.27 225.18,200.77" fill="none" id="Bundle-to-Link" style="stroke:#181818;stroke-width:1;"></path><polygon fill="#181818" points="225.18,206.77,229.18,197.77,225.18,201.77,221.18,197.77,225.18,206.77" style="stroke:#181818;stroke-width:1;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacing" textlength="33.1348" x="191.18" y="156.8969">link[]</text></g><g class="link" data-entity-1="Bundle" data-entity-2="Entry" data-source-line="71" data-uid="lnk12" id="link_Bundle_Entry"><path codeline="71" d="M297.91,114.71 C297.91,152.16 297.91,195.34 297.91,195.34 C297.91,195.34 428.62,195.34 537.96,195.34" fill="none" id="Bundle-to-Entry" style="stroke:#181818;stroke-width:1;"></path><polygon fill="#181818" points="543.96,195.34,534.96,191.34,538.96,195.34,534.96,199.34,543.96,195.34" style="stroke:#181818;stroke-width:1;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacing" textlength="44.5161" x="335.62" y="191.4069">entry[]</text></g><g class="link" data-entity-1="Link" data-entity-2="LinkRel" data-source-line="72" data-uid="lnk13" id="link_Link_LinkRel"><path codeline="72" d="M195.14,282.44 C195.14,308.66 195.14,338.14 195.14,368.43" fill="none" id="Link-to-LinkRel" style="stroke:#181818;stroke-width:1;"></path><polygon fill="#181818" points="195.14,374.43,199.14,365.43,195.14,369.43,191.14,365.43,195.14,374.43" style="stroke:#181818;stroke-width:1;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacing" textlength="49.8228" x="145.14" y="324.5069">relation</text></g><g class="link" data-entity-1="Entry" data-entity-2="Search" data-source-line="73" data-uid="lnk14" id="link_Entry_Search"><path codeline="73" d="M549.49,306.83 C549.49,337.15 549.49,366.6 549.49,392.76" fill="none" id="Entry-to-Search" style="stroke:#181818;stroke-width:1;"></path><polygon fill="#181818" points="549.49,398.76,553.49,389.76,549.49,393.76,545.49,389.76,549.49,398.76" style="stroke:#181818;stroke-width:1;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacing" textlength="43.4688" x="505.49" y="348.8669">search</text></g><g class="link" data-entity-1="Entry" data-entity-2="Request" data-source-line="74" data-uid="lnk15" id="link_Entry_Request"><path codeline="74" d="M700.4,306.83 C700.4,331.24 700.4,352.98 700.4,376.51" fill="none" id="Entry-to-Request" style="stroke:#181818;stroke-width:1;"></path><polygon fill="#181818" points="700.4,382.51,704.4,373.51,700.4,377.51,696.4,373.51,700.4,382.51" style="stroke:#181818;stroke-width:1;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacing" textlength="49.7021" x="650.4" y="340.7369">request</text></g><g class="link" data-entity-1="Entry" data-entity-2="Response" data-source-line="75" data-uid="lnk16" id="link_Entry_Response"><path codeline="75" d="M811.12,244.34 C915.34,244.34 1042.54,244.34 1042.54,244.34 C1042.54,244.34 1042.54,319.6 1042.54,376.42" fill="none" id="Entry-to-Response" style="stroke:#181818;stroke-width:1;"></path><polygon fill="#181818" points="1042.54,382.42,1046.54,373.42,1042.54,377.42,1038.54,373.42,1042.54,382.42" style="stroke:#181818;stroke-width:1;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacing" textlength="59.3315" x="935.88" y="240.4069">response</text></g></g></svg></div><div class="puml dark" style=""><svg class="diagram" contentstyletype="text/css" data-diagram-type="CLASS" height="505px" preserveaspectratio="xMidYMid meet" style="width:1158px;height:505px;background:#1B1B1B;" version="1.1" viewbox="0 0 1158 505" width="1158px" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" zoomandpan="magnify"><defs></defs><g><rect fill="#1B1B1B" height="505" style="stroke:none;stroke-width:1;" width="1158" x="0" y="0"></rect><g class="entity" data-entity="Bundle" data-source-line="12" data-uid="ent0002" id="entity_Bundle"><rect fill="#313139" height="107.4844" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="218.1787" x="152.45" y="7"></rect><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="48.7402" x="237.1692" y="24.9951">Bundle</text><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="153.45" x2="369.6287" y1="33.2969" y2="33.2969"></line><ellipse cx="163.45" cy="46.9453" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="173.5576" x="172.45" y="50.292">type : code «REQUIRED»</text><ellipse cx="163.45" cy="63.2422" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="137.8398" x="172.45" y="66.5889">total : integer [0..1]</text><ellipse cx="163.45" cy="79.5391" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="171.3428" x="172.45" y="82.8857">link[] : Bundle.Link [0..*]</text><ellipse cx="163.45" cy="95.8359" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="192.1787" x="172.45" y="99.1826">entry[] : Bundle.Entry [0..*]</text><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="153.45" x2="369.6287" y1="106.4844" y2="106.4844"></line></g><g class="entity" data-entity="Type" data-source-line="19" data-uid="ent0003" id="entity_Type"><rect fill="#313139" height="140.0781" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="105.085" x="7" y="174.48"></rect><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="87.5273" x="15.7788" y="192.4751">Bundle.Type</text><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="8" x2="111.085" y1="200.7769" y2="200.7769"></line><ellipse cx="18" cy="214.4253" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"></ellipse><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="68.209" x="27" y="217.772">searchset</text><ellipse cx="18" cy="230.7222" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"></ellipse><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="39.5254" x="27" y="234.0689">batch</text><ellipse cx="18" cy="247.0191" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"></ellipse><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="79.085" x="27" y="250.3657">transaction</text><ellipse cx="18" cy="263.3159" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"></ellipse><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="48.1523" x="27" y="266.6626">history</text><ellipse cx="18" cy="279.6128" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"></ellipse><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="67.1699" x="27" y="282.9595">collection</text><ellipse cx="18" cy="295.9097" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"></ellipse><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="70.6357" x="27" y="299.2564">document</text><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="8" x2="111.085" y1="306.5581" y2="306.5581"></line></g><g class="entity" data-entity="Link" data-source-line="28" data-uid="ent0004" id="entity_Link"><rect fill="#313139" height="74.8906" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="228.3643" x="147.36" y="207.07"></rect><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="81.8604" x="220.612" y="225.0651">Bundle.Link</text><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="148.36" x2="374.7243" y1="233.3669" y2="233.3669"></line><ellipse cx="158.36" cy="247.0153" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="202.3643" x="167.36" y="250.362">relation : string «REQUIRED»</text><ellipse cx="158.36" cy="263.3122" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="145.5576" x="167.36" y="266.6589">url : uri «REQUIRED»</text><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="148.36" x2="374.7243" y1="273.9606" y2="273.9606"></line></g><g class="entity" data-entity="LinkRel" data-source-line="33" data-uid="ent0005" id="entity_LinkRel"><rect fill="#313139" height="123.7813" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="96.7471" x="146.17" y="374.56"></rect><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="90.7471" x="149.17" y="392.5551">Link.Relation</text><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="147.17" x2="241.9171" y1="400.8569" y2="400.8569"></line><ellipse cx="157.17" cy="414.5053" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"></ellipse><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="24.7256" x="166.17" y="417.852">self</text><ellipse cx="157.17" cy="430.8022" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"></ellipse><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="31.2607" x="166.17" y="434.1489">next</text><ellipse cx="157.17" cy="447.0991" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"></ellipse><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="60.1631" x="166.17" y="450.4457">previous</text><ellipse cx="157.17" cy="463.3959" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"></ellipse><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="27.3574" x="166.17" y="466.7426">first</text><ellipse cx="157.17" cy="479.6928" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"></ellipse><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="25.252" x="166.17" y="483.0395">last</text><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="147.17" x2="241.9171" y1="490.3413" y2="490.3413"></line></g><g class="entity" data-entity="Entry" data-source-line="41" data-uid="ent0006" id="entity_Entry"><rect fill="#313139" height="123.7813" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="266.6592" x="544.21" y="182.63"></rect><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="90.4395" x="632.3199" y="200.6251">Bundle.Entry</text><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="545.21" x2="809.8692" y1="208.9269" y2="208.9269"></line><ellipse cx="555.21" cy="222.5753" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="115.6982" x="564.21" y="225.922">fullUrl : uri [0..1]</text><ellipse cx="555.21" cy="238.8722" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="182.0137" x="564.21" y="242.2189">resource : Resource [0..1]</text><ellipse cx="555.21" cy="255.1691" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="204.1143" x="564.21" y="258.5157">search : Bundle.Search [0..1]</text><ellipse cx="555.21" cy="271.4659" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="219.9189" x="564.21" y="274.8126">request : Bundle.Request [0..1]</text><ellipse cx="555.21" cy="287.7628" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="240.6592" x="564.21" y="291.1095">response : Bundle.Response [0..1]</text><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="545.21" x2="809.8692" y1="298.4113" y2="298.4113"></line></g><g class="entity" data-entity="Search" data-source-line="49" data-uid="ent0007" id="entity_Search"><rect fill="#313139" height="74.8906" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="276.4688" x="278.31" y="399"></rect><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="101.5957" x="365.7465" y="416.9951">Bundle.Search</text><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="279.31" x2="553.7788" y1="425.2969" y2="425.2969"></line><ellipse cx="289.31" cy="438.9453" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="250.4688" x="298.31" y="442.292">mode : code [0..1] «match/include»</text><ellipse cx="289.31" cy="455.2422" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="148.8252" x="298.31" y="458.5889">score : decimal [0..1]</text><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="279.31" x2="553.7788" y1="465.8906" y2="465.8906"></line></g><g class="entity" data-entity="Request" data-source-line="54" data-uid="ent0008" id="entity_Request"><rect fill="#313139" height="107.4844" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="309.2334" x="589.93" y="382.71"></rect><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="110.6875" x="689.2029" y="400.7051">Bundle.Request</text><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="590.93" x2="898.1634" y1="409.0069" y2="409.0069"></line><ellipse cx="600.93" cy="422.6553" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="283.2334" x="609.93" y="426.002">method : code «GET/POST/PUT/DELETE»</text><ellipse cx="600.93" cy="438.9522" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="145.5576" x="609.93" y="442.2989">url : uri «REQUIRED»</text><ellipse cx="600.93" cy="455.2491" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="147.4307" x="609.93" y="458.5957">ifMatch : string [0..1]</text><ellipse cx="600.93" cy="471.5459" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="175.041" x="609.93" y="474.8926">ifNoneExist : string [0..1]</text><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="590.93" x2="898.1634" y1="482.1944" y2="482.1944"></line></g><g class="entity" data-entity="Response" data-source-line="61" data-uid="ent0009" id="entity_Response"><rect fill="#313139" height="107.4844" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="217.7275" x="933.68" y="382.71"></rect><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="121.0576" x="982.015" y="400.7051">Bundle.Response</text><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="934.68" x2="1150.4075" y1="409.0069" y2="409.0069"></line><ellipse cx="944.68" cy="422.6553" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="191.7275" x="953.68" y="426.002">status : string «REQUIRED»</text><ellipse cx="944.68" cy="438.9522" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="129.7734" x="953.68" y="442.2989">location : uri [0..1]</text><ellipse cx="944.68" cy="455.2491" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="127.4629" x="953.68" y="458.5957">etag : string [0..1]</text><ellipse cx="944.68" cy="471.5459" fill="#000000" rx="3" ry="3" style="stroke:#000000;stroke-width:1;"></ellipse><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="189.1846" x="953.68" y="474.8926">lastModified : instant [0..1]</text><line style="stroke:#E7E7E7;stroke-width:0.5;" x1="934.68" x2="1150.4075" y1="482.1944" y2="482.1944"></line></g><g class="link" data-entity-1="Bundle" data-entity-2="Type" data-source-line="69" data-uid="lnk10" id="link_Bundle_Type"><path codeline="69" d="M151.97,60.34 C104.48,60.34 59.54,60.34 59.54,60.34 C59.54,60.34 59.54,116.11 59.54,168.1" fill="none" id="Bundle-to-Type" style="stroke:#E7E7E7;stroke-width:1;"></path><polygon fill="#E7E7E7" points="59.54,174.1,63.54,165.1,59.54,169.1,55.54,165.1,59.54,174.1" style="stroke:#E7E7E7;stroke-width:1;"></polygon><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthadjust="spacing" textlength="29.0405" x="29.54" y="67.0769">type</text></g><g class="link" data-entity-1="Bundle" data-entity-2="Link" data-source-line="70" data-uid="lnk11" id="link_Bundle_Link"><path codeline="70" d="M225.18,114.88 C225.18,144.43 225.18,174.27 225.18,200.77" fill="none" id="Bundle-to-Link" style="stroke:#E7E7E7;stroke-width:1;"></path><polygon fill="#E7E7E7" points="225.18,206.77,229.18,197.77,225.18,201.77,221.18,197.77,225.18,206.77" style="stroke:#E7E7E7;stroke-width:1;"></polygon><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthadjust="spacing" textlength="33.1348" x="191.18" y="156.8969">link[]</text></g><g class="link" data-entity-1="Bundle" data-entity-2="Entry" data-source-line="71" data-uid="lnk12" id="link_Bundle_Entry"><path codeline="71" d="M297.91,114.71 C297.91,152.16 297.91,195.34 297.91,195.34 C297.91,195.34 428.62,195.34 537.96,195.34" fill="none" id="Bundle-to-Entry" style="stroke:#E7E7E7;stroke-width:1;"></path><polygon fill="#E7E7E7" points="543.96,195.34,534.96,191.34,538.96,195.34,534.96,199.34,543.96,195.34" style="stroke:#E7E7E7;stroke-width:1;"></polygon><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthadjust="spacing" textlength="44.5161" x="335.62" y="191.4069">entry[]</text></g><g class="link" data-entity-1="Link" data-entity-2="LinkRel" data-source-line="72" data-uid="lnk13" id="link_Link_LinkRel"><path codeline="72" d="M195.14,282.44 C195.14,308.66 195.14,338.14 195.14,368.43" fill="none" id="Link-to-LinkRel" style="stroke:#E7E7E7;stroke-width:1;"></path><polygon fill="#E7E7E7" points="195.14,374.43,199.14,365.43,195.14,369.43,191.14,365.43,195.14,374.43" style="stroke:#E7E7E7;stroke-width:1;"></polygon><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthadjust="spacing" textlength="49.8228" x="145.14" y="324.5069">relation</text></g><g class="link" data-entity-1="Entry" data-entity-2="Search" data-source-line="73" data-uid="lnk14" id="link_Entry_Search"><path codeline="73" d="M549.49,306.83 C549.49,337.15 549.49,366.6 549.49,392.76" fill="none" id="Entry-to-Search" style="stroke:#E7E7E7;stroke-width:1;"></path><polygon fill="#E7E7E7" points="549.49,398.76,553.49,389.76,549.49,393.76,545.49,389.76,549.49,398.76" style="stroke:#E7E7E7;stroke-width:1;"></polygon><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthadjust="spacing" textlength="43.4688" x="505.49" y="348.8669">search</text></g><g class="link" data-entity-1="Entry" data-entity-2="Request" data-source-line="74" data-uid="lnk15" id="link_Entry_Request"><path codeline="74" d="M700.4,306.83 C700.4,331.24 700.4,352.98 700.4,376.51" fill="none" id="Entry-to-Request" style="stroke:#E7E7E7;stroke-width:1;"></path><polygon fill="#E7E7E7" points="700.4,382.51,704.4,373.51,700.4,377.51,696.4,373.51,700.4,382.51" style="stroke:#E7E7E7;stroke-width:1;"></polygon><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthadjust="spacing" textlength="49.7021" x="650.4" y="340.7369">request</text></g><g class="link" data-entity-1="Entry" data-entity-2="Response" data-source-line="75" data-uid="lnk16" id="link_Entry_Response"><path codeline="75" d="M811.12,244.34 C915.34,244.34 1042.54,244.34 1042.54,244.34 C1042.54,244.34 1042.54,319.6 1042.54,376.42" fill="none" id="Entry-to-Response" style="stroke:#E7E7E7;stroke-width:1;"></path><polygon fill="#E7E7E7" points="1042.54,382.42,1046.54,373.42,1042.54,377.42,1038.54,373.42,1042.54,382.42" style="stroke:#E7E7E7;stroke-width:1;"></polygon><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthadjust="spacing" textlength="59.3315" x="935.88" y="240.4069">response</text></g></g></svg></div></div>
<p>Let's explore: </p>
<ul>
<li>When to use each bundle type</li>
<li>How to construct entries</li>
<li>What the server does with each type</li>
<li>Real-world use cases</li>
</ul>
<hr/>
<h2 id="bundle-types-the-five-patterns">Bundle Types: The Five Patterns</h2>
<p>FHIR defines five bundle types, each optimized for different use cases:</p>
<h3 id="1-searchset-search-results">1. searchset - Search Results</h3>
<p><strong>When used</strong>: Server response to search queries</p>
<p><strong>Characteristics</strong>:</p>
<ul>
<li>Contains resources matching search criteria</li>
<li>Includes pagination links (next, previous, last)</li>
<li>Each entry has a search score and mode</li>
<li>Total count indicates full result set size</li>
</ul>
<p><strong>Example</strong>: Search for a patient's lab observations</p>
<p><strong>Request</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="err">GET /Observation?patient=smart-1288992&amp;category=laboratory&amp;_count=10</span>
</code></pre></div>
<p><strong>Response</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bundle"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"searchset"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">47</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"link"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"relation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"self"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://fhir.example.org/Observation?patient=smart-1288992&amp;category=laboratory&amp;_count=10"</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"relation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"next"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://fhir.example.org/Observation?patient=smart-1288992&amp;category=laboratory&amp;_count=10&amp;_offset=10"</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">"entry"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"fullUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://fhir.example.org/Observation/glucose-20241101"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Observation"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"glucose-20241101"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"final"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">            </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://loinc.org"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2345-7"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Glucose"</span>
<span class="w">          </span><span class="p">}]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">"subject"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patient/smart-1288992"</span><span class="p">},</span>
<span class="w">        </span><span class="nt">"valueQuantity"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">95</span><span class="p">,</span><span class="w"> </span><span class="nt">"unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mg/dL"</span><span class="p">}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">"search"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"match"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"fullUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://fhir.example.org/Observation/hba1c-20241101"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Observation"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hba1c-20241101"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"final"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">            </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://loinc.org"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4548-4"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hemoglobin A1c"</span>
<span class="w">          </span><span class="p">}]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">"subject"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patient/smart-1288992"</span><span class="p">},</span>
<span class="w">        </span><span class="nt">"valueQuantity"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">7.2</span><span class="p">,</span><span class="w"> </span><span class="nt">"unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"%"</span><span class="p">}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">"search"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"match"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// ... 8 more entries</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Key elements</strong>:</p>
<ul>
<li><strong><code>total</code></strong>: 47 total results exist (showing first 10)</li>
<li><strong><code>link[relation="next"]</code></strong>: URL to fetch next page</li>
<li><strong><code>entry[].search.mode</code></strong>: "match" (directly matched query) vs. "include" (referenced resource via <code>_include</code>)</li>
<li><strong><code>entry[].search.score</code></strong>: Relevance score (1.0 = exact match)</li>
</ul>
<p><strong>Pagination handling</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">fetchAllResults</span><span class="p">(</span><span class="nx">initialUrl</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">initialUrl</span><span class="p">;</span>

<span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nx">url</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">bundle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="nx">url</span><span class="p">);</span>
<span class="w">    </span><span class="nx">results</span><span class="p">.</span><span class="nx">push</span><span class="p">(...</span><span class="nx">bundle</span><span class="p">.</span><span class="nx">entry</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nx">resource</span><span class="p">));</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">nextLink</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">bundle</span><span class="p">.</span><span class="nx">link</span><span class="o">?</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">l</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">l</span><span class="p">.</span><span class="nx">relation</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">"next"</span><span class="p">);</span>
<span class="w">    </span><span class="nx">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">nextLink</span><span class="o">?</span><span class="p">.</span><span class="nx">url</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">results</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Usage</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">allLabs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetchAllResults</span><span class="p">(</span>
<span class="w">  </span><span class="s2">"/Observation?patient=smart-1288992&amp;category=laboratory&amp;_count=10"</span>
<span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Fetched </span><span class="si">${</span><span class="nx">allLabs</span><span class="p">.</span><span class="nx">length</span><span class="si">}</span><span class="sb"> lab results`</span><span class="p">);</span>
</code></pre></div>
<hr/>
<h3 id="2-transaction-atomic-operations">2. transaction - Atomic Operations</h3>
<p><strong>When used</strong>: Client wants multiple operations to succeed or fail together</p>
<p><strong>Characteristics</strong>:</p>
<ul>
<li>All-or-nothing semantics (database transaction)</li>
<li>Server validates all entries before processing any</li>
<li>If one entry fails, entire transaction rolls back</li>
<li>Supports create, update, delete operations</li>
<li>Enables conditional operations (e.g., "create if not exists")</li>
</ul>
<p><strong>Example</strong>: Create a patient and initial observation together</p>
<p><strong>Request</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="err">POST /</span>
<span class="err">Content-Type: application/fhir+json</span>
</code></pre></div>
<p><strong>Body</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bundle"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"transaction"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"entry"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"fullUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"urn:uuid:patient-temp-id"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patient"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="nt">"family"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Doe"</span><span class="p">,</span><span class="w"> </span><span class="nt">"given"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Jane"</span><span class="p">]}],</span>
<span class="w">        </span><span class="nt">"gender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"female"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"birthDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1990-05-15"</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">"request"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patient"</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"fullUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"urn:uuid:observation-temp-id"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Observation"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"final"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">            </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://loinc.org"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8310-5"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Body temperature"</span>
<span class="w">          </span><span class="p">}]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">"subject"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"urn:uuid:patient-temp-id"</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">"valueQuantity"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">98.6</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"°F"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://unitsofmeasure.org"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[degF]"</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">"request"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Observation"</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Response</strong> (on success):</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bundle"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"transaction-response"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"entry"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"201 Created"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patient/new-patient-123/_history/1"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"etag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"W/\"1\""</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"lastModified"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-11-06T10:30:00Z"</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patient"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"new-patient-123"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">"versionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"lastUpdated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-11-06T10:30:00Z"</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="nt">"family"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Doe"</span><span class="p">,</span><span class="w"> </span><span class="nt">"given"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Jane"</span><span class="p">]}],</span>
<span class="w">        </span><span class="nt">"gender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"female"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"birthDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1990-05-15"</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"201 Created"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Observation/new-obs-456/_history/1"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"etag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"W/\"1\""</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"lastModified"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-11-06T10:30:00Z"</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Observation"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"new-obs-456"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">"versionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"lastUpdated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-11-06T10:30:00Z"</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"final"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">            </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://loinc.org"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8310-5"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Body temperature"</span>
<span class="w">          </span><span class="p">}]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">"subject"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patient/new-patient-123"</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">"valueQuantity"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">98.6</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"°F"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://unitsofmeasure.org"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[degF]"</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Key features</strong>:</p>
<ul>
<li><strong>Temporary references</strong>: <code>urn:uuid:patient-temp-id</code> is replaced with actual server-assigned ID (<code>Patient/new-patient-123</code>)</li>
<li><strong>Atomicity</strong>: If patient creation failed validation, observation wouldn't be created either</li>
<li><strong>Response bundle</strong>: Contains status codes and newly created resources with IDs</li>
</ul>
<p><strong>Use cases</strong>:</p>
<ul>
<li>Importing data from external system (create multiple resources as unit)</li>
<li>Clinical documentation (create encounter + observations + conditions together)</li>
<li>Data integrity (ensure referential integrity across resources)</li>
</ul>
<hr/>
<h3 id="3-batch-independent-operations">3. batch - Independent Operations</h3>
<p><strong>When used</strong>: Client wants multiple operations executed, but failures are independent</p>
<p><strong>Characteristics</strong>:</p>
<ul>
<li>Each entry processed independently</li>
<li>One failure doesn't affect others</li>
<li>No cross-references between entries (can't use temp IDs)</li>
<li>Faster than individual requests (single HTTP round-trip)</li>
</ul>
<p><strong>Example</strong>: Update multiple observations' status</p>
<p><strong>Request</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="err">POST /</span>
<span class="err">Content-Type: application/fhir+json</span>
</code></pre></div>
<p><strong>Body</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bundle"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"batch"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"entry"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"request"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patient/smart-1288992"</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"request"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PATCH"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Observation/obs-123"</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Parameters"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"parameter"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"operation"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"part"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">              </span><span class="p">{</span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"type"</span><span class="p">,</span><span class="w"> </span><span class="nt">"valueCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"replace"</span><span class="p">},</span>
<span class="w">              </span><span class="p">{</span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"path"</span><span class="p">,</span><span class="w"> </span><span class="nt">"valueString"</span><span class="p">:</span><span class="w"> </span><span class="s2">"status"</span><span class="p">},</span>
<span class="w">              </span><span class="p">{</span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"value"</span><span class="p">,</span><span class="w"> </span><span class="nt">"valueCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"final"</span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"request"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DELETE"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Observation/obs-456"</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Response</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bundle"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"batch-response"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"entry"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"200 OK"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"etag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"W/\"3\""</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"lastModified"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-11-01T10:00:00Z"</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patient"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"smart-1288992"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="nt">"family"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Shaw"</span><span class="p">,</span><span class="w"> </span><span class="nt">"given"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Amy"</span><span class="p">]}]</span>
<span class="w">        </span><span class="c1">// ... full patient resource</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"200 OK"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"etag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"W/\"2\""</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"lastModified"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-11-06T10:35:00Z"</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"404 Not Found"</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OperationOutcome"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"issue"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">          </span><span class="nt">"severity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"not-found"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"diagnostics"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Observation/obs-456 not found"</span>
<span class="w">        </span><span class="p">}]</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Key differences from transaction</strong>:</p>
<ul>
<li>Entry 3 failed (404), but entries 1 and 2 still succeeded</li>
<li>Each entry's response is independent</li>
<li>No temporary reference resolution</li>
</ul>
<p><strong>Use cases</strong>:</p>
<ul>
<li>Bulk status updates (mark multiple observations as "amended")</li>
<li>Mixed read/write operations</li>
<li>Fire-and-forget deletes (don't care if some already deleted)</li>
</ul>
<hr/>
<h3 id="4-document-clinical-documents">4. document - Clinical Documents</h3>
<p><strong>When used</strong>: Packaging a complete clinical document (like a discharge summary)</p>
<p><strong>Characteristics</strong>:</p>
<ul>
<li>First entry MUST be a Composition resource</li>
<li>Composition references all other resources in bundle</li>
<li>Bundle is immutable snapshot (signed, timestamped)</li>
<li>Self-contained (no external references)</li>
</ul>
<p><strong>Example</strong>: Discharge summary document</p>
<p><strong>Bundle</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bundle"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"document"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-11-06T10:00:00Z"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://hospital.example.org/documents"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DISCHARGE-SUMMARY-789"</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">"entry"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"fullUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"urn:uuid:composition-1"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Composition"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"composition-1"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"final"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">            </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://loinc.org"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18842-5"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Discharge summary"</span>
<span class="w">          </span><span class="p">}]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">"subject"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"urn:uuid:patient-1"</span><span class="p">},</span>
<span class="w">        </span><span class="nt">"encounter"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"urn:uuid:encounter-1"</span><span class="p">},</span>
<span class="w">        </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-11-06T10:00:00Z"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"author"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"urn:uuid:practitioner-1"</span><span class="p">}],</span>
<span class="w">        </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Discharge Summary - Amy Shaw"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"section"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hospital Course"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">                </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://loinc.org"</span><span class="p">,</span>
<span class="w">                </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8648-8"</span><span class="p">,</span>
<span class="w">                </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hospital course"</span>
<span class="w">              </span><span class="p">}]</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"generated"</span><span class="p">,</span>
<span class="w">              </span><span class="nt">"div"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;div xmlns=\"http://www.w3.org/1999/xhtml\"&gt;&lt;p&gt;Patient admitted for diabetic ketoacidosis. Treated with IV fluids and insulin. Condition stabilized.&lt;/p&gt;&lt;/div&gt;"</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Discharge Medications"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"entry"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">              </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"urn:uuid:medication-1"</span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Discharge Diagnoses"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"entry"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">              </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"urn:uuid:condition-1"</span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"fullUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"urn:uuid:patient-1"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patient"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="nt">"family"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Shaw"</span><span class="p">,</span><span class="w"> </span><span class="nt">"given"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Amy"</span><span class="p">]}],</span>
<span class="w">        </span><span class="nt">"gender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"female"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"birthDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1987-02-20"</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"fullUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"urn:uuid:encounter-1"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Encounter"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"finished"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"class"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://terminology.hl7.org/CodeSystem/v3-ActCode"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IMP"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inpatient encounter"</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">"subject"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"urn:uuid:patient-1"</span><span class="p">},</span>
<span class="w">        </span><span class="nt">"period"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-11-01T08:00:00Z"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"end"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-11-05T14:00:00Z"</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"fullUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"urn:uuid:practitioner-1"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Practitioner"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="nt">"family"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Johnson"</span><span class="p">,</span><span class="w"> </span><span class="nt">"given"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Sarah"</span><span class="p">]}]</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"fullUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"urn:uuid:medication-1"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MedicationRequest"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"intent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"order"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"medicationCodeableConcept"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">            </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.nlm.nih.gov/research/umls/rxnorm"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"860975"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Metformin 500mg tablet"</span>
<span class="w">          </span><span class="p">}]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">"subject"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"urn:uuid:patient-1"</span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"fullUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"urn:uuid:condition-1"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Condition"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">            </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://snomed.info/sct"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"420422005"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Diabetic ketoacidosis"</span>
<span class="w">          </span><span class="p">}]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">"subject"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"urn:uuid:patient-1"</span><span class="p">},</span>
<span class="w">        </span><span class="nt">"encounter"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"urn:uuid:encounter-1"</span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Key features</strong>:</p>
<ul>
<li><strong>Self-contained</strong>: All references use <code>urn:uuid</code> within the bundle (no external lookups needed)</li>
<li><strong>Immutable</strong>: Bundle.timestamp + identifier make it a fixed snapshot</li>
<li><strong>Signable</strong>: Can add digital signature to entire bundle for legal authenticity</li>
<li><strong>Portable</strong>: Can be transmitted as single file, stored in document repository</li>
</ul>
<p><strong>Use cases</strong>:</p>
<ul>
<li>C-CDA replacement (structured clinical documents)</li>
<li>Legal medical records (court submissions)</li>
<li>Patient access (Blue Button export)</li>
<li>Health information exchange (sending to another hospital)</li>
</ul>
<hr/>
<h3 id="5-message-event-notifications">5. message - Event Notifications</h3>
<p><strong>When used</strong>: Asynchronous messaging between systems</p>
<p><strong>Characteristics</strong>:</p>
<ul>
<li>First entry MUST be a MessageHeader</li>
<li>MessageHeader describes event type and routing</li>
<li>Supports request/response pattern</li>
<li>Enables pub/sub architectures</li>
</ul>
<p><strong>Example</strong>: New lab result notification</p>
<p><strong>Bundle</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bundle"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"message"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-11-06T10:30:00Z"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"entry"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"fullUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"urn:uuid:message-header-1"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MessageHeader"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"message-header-1"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"eventCoding"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://terminology.hl7.org/CodeSystem/message-events"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"observation-provide"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Provide Observation"</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">"source"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Lab Interface Engine"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"software"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mirth Connect"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4.0"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"endpoint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://lab.example.org/fhir"</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">"destination"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">          </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EHR System"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"endpoint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://ehr.example.org/fhir"</span>
<span class="w">        </span><span class="p">}],</span>
<span class="w">        </span><span class="nt">"focus"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"urn:uuid:observation-1"</span><span class="p">}</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"fullUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"urn:uuid:observation-1"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Observation"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"final"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">            </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://loinc.org"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2345-7"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Glucose"</span>
<span class="w">          </span><span class="p">}]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">"subject"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patient/smart-1288992"</span><span class="p">},</span>
<span class="w">        </span><span class="nt">"valueQuantity"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">95</span><span class="p">,</span><span class="w"> </span><span class="nt">"unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mg/dL"</span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>MessageHeader elements</strong>:</p>
<ul>
<li><strong><code>eventCoding</code></strong>: What happened (new observation, patient admission, discharge, etc.)</li>
<li><strong><code>source</code></strong>: Who sent the message</li>
<li><strong><code>destination</code></strong>: Who should receive it</li>
<li><strong><code>focus</code></strong>: The primary resource(s) this message is about</li>
</ul>
<p><strong>Use cases</strong>:</p>
<ul>
<li>Lab result interfaces (HL7 v2 replacement)</li>
<li>Admission/Discharge/Transfer (ADT) notifications</li>
<li>Prescription routing to pharmacy</li>
<li>Clinical decision support alerts</li>
</ul>
<hr/>
<h2 id="working-with-bundles-practical-patterns">Working with Bundles: Practical Patterns</h2>
<h3 id="pattern-1-processing-search-results">Pattern 1: Processing Search Results</h3>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">processSearchBundle</span><span class="p">(</span><span class="nx">bundle</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">bundle</span><span class="p">.</span><span class="nx">type</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="s2">"searchset"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s2">"Expected searchset bundle"</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">resources</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">bundle</span><span class="p">.</span><span class="nx">entry</span>
<span class="w">    </span><span class="o">?</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nx">search</span><span class="o">?</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">"match"</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nx">resource</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">[];</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">included</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">bundle</span><span class="p">.</span><span class="nx">entry</span>
<span class="w">    </span><span class="o">?</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nx">search</span><span class="o">?</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">"include"</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nx">resource</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">[];</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">resources</span><span class="p">,</span>
<span class="w">    </span><span class="nx">included</span><span class="p">,</span>
<span class="w">    </span><span class="nx">total</span><span class="o">:</span><span class="w"> </span><span class="nx">bundle</span><span class="p">.</span><span class="nx">total</span><span class="p">,</span>
<span class="w">    </span><span class="nx">hasMore</span><span class="o">:</span><span class="w"> </span><span class="nx">bundle</span><span class="p">.</span><span class="nx">link</span><span class="o">?</span><span class="p">.</span><span class="nx">some</span><span class="p">(</span><span class="nx">l</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">l</span><span class="p">.</span><span class="nx">relation</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">"next"</span><span class="p">)</span>
<span class="w">  </span><span class="p">};</span>
<span class="p">}</span>
</code></pre></div>
<hr/>
<h3 id="pattern-2-building-transaction-bundles">Pattern 2: Building Transaction Bundles</h3>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">createTransactionBundle</span><span class="p">(</span><span class="nx">operations</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">entries</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">operations</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">op</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">entry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">request</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="nx">op</span><span class="p">.</span><span class="nx">method</span><span class="p">,</span><span class="w"> </span><span class="c1">// POST, PUT, DELETE, GET</span>
<span class="w">        </span><span class="nx">url</span><span class="o">:</span><span class="w"> </span><span class="nx">op</span><span class="p">.</span><span class="nx">url</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">op</span><span class="p">.</span><span class="nx">resource</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">entry</span><span class="p">.</span><span class="nx">resource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">op</span><span class="p">.</span><span class="nx">resource</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">op</span><span class="p">.</span><span class="nx">tempId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">entry</span><span class="p">.</span><span class="nx">fullUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`urn:uuid:</span><span class="si">${</span><span class="nx">op</span><span class="p">.</span><span class="nx">tempId</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">entry</span><span class="p">;</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">resourceType</span><span class="o">:</span><span class="w"> </span><span class="s2">"Bundle"</span><span class="p">,</span>
<span class="w">    </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s2">"transaction"</span><span class="p">,</span>
<span class="w">    </span><span class="nx">entry</span><span class="o">:</span><span class="w"> </span><span class="nx">entries</span>
<span class="w">  </span><span class="p">};</span>
<span class="p">}</span>

<span class="c1">// Usage</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">bundle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">createTransactionBundle</span><span class="p">([</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">,</span>
<span class="w">    </span><span class="nx">url</span><span class="o">:</span><span class="w"> </span><span class="s2">"Patient"</span><span class="p">,</span>
<span class="w">    </span><span class="nx">tempId</span><span class="o">:</span><span class="w"> </span><span class="s2">"patient-1"</span><span class="p">,</span>
<span class="w">    </span><span class="nx">resource</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">resourceType</span><span class="o">:</span><span class="w"> </span><span class="s2">"Patient"</span><span class="p">,</span>
<span class="w">      </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"family"</span><span class="o">:</span><span class="w"> </span><span class="s2">"Doe"</span><span class="p">,</span><span class="w"> </span><span class="s2">"given"</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Jane"</span><span class="p">]}]</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">,</span>
<span class="w">    </span><span class="nx">url</span><span class="o">:</span><span class="w"> </span><span class="s2">"Observation"</span><span class="p">,</span>
<span class="w">    </span><span class="nx">resource</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">resourceType</span><span class="o">:</span><span class="w"> </span><span class="s2">"Observation"</span><span class="p">,</span>
<span class="w">      </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="s2">"final"</span><span class="p">,</span>
<span class="w">      </span><span class="nx">subject</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">reference</span><span class="o">:</span><span class="w"> </span><span class="s2">"urn:uuid:patient-1"</span><span class="p">},</span>
<span class="w">      </span><span class="nx">code</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">coding</span><span class="o">:</span><span class="w"> </span><span class="p">[{</span><span class="nx">system</span><span class="o">:</span><span class="w"> </span><span class="s2">"http://loinc.org"</span><span class="p">,</span><span class="w"> </span><span class="nx">code</span><span class="o">:</span><span class="w"> </span><span class="s2">"8310-5"</span><span class="p">}]},</span>
<span class="w">      </span><span class="nx">valueQuantity</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">value</span><span class="o">:</span><span class="w"> </span><span class="mf">98.6</span><span class="p">,</span><span class="w"> </span><span class="nx">unit</span><span class="o">:</span><span class="w"> </span><span class="s2">"°F"</span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">]);</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="s2">"/"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">,</span>
<span class="w">  </span><span class="nx">headers</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"Content-Type"</span><span class="o">:</span><span class="w"> </span><span class="s2">"application/fhir+json"</span><span class="p">},</span>
<span class="w">  </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">bundle</span><span class="p">)</span>
<span class="p">});</span>
</code></pre></div>
<hr/>
<h3 id="pattern-3-extracting-transaction-results">Pattern 3: Extracting Transaction Results</h3>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">extractTransactionResults</span><span class="p">(</span><span class="nx">responseBundle</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">responseBundle</span><span class="p">.</span><span class="nx">type</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="s2">"transaction-response"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s2">"Expected transaction-response bundle"</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">succeeded</span><span class="o">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">    </span><span class="nx">failed</span><span class="o">:</span><span class="w"> </span><span class="p">[]</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="nx">responseBundle</span><span class="p">.</span><span class="nx">entry</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">entry</span><span class="p">,</span><span class="w"> </span><span class="nx">index</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">statusCode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">entry</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">' '</span><span class="p">)[</span><span class="mf">0</span><span class="p">]);</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">statusCode</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mf">200</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">statusCode</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">300</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">results</span><span class="p">.</span><span class="nx">succeeded</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
<span class="w">        </span><span class="nx">index</span><span class="p">,</span>
<span class="w">        </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">,</span>
<span class="w">        </span><span class="nx">location</span><span class="o">:</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">location</span><span class="p">,</span>
<span class="w">        </span><span class="nx">resource</span><span class="o">:</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">resource</span>
<span class="w">      </span><span class="p">});</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">results</span><span class="p">.</span><span class="nx">failed</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
<span class="w">        </span><span class="nx">index</span><span class="p">,</span>
<span class="w">        </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">,</span>
<span class="w">        </span><span class="nx">outcome</span><span class="o">:</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">resource</span><span class="w"> </span><span class="c1">// OperationOutcome</span>
<span class="w">      </span><span class="p">});</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">results</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<hr/>
<h3 id="pattern-4-bundle-size-management">Pattern 4: Bundle Size Management</h3>
<p>Large bundles can cause:</p>
<ul>
<li>Network timeouts</li>
<li>Server memory exhaustion</li>
<li>Client parsing delays</li>
</ul>
<p><strong>Best practices</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">MAX_BUNDLE_SIZE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">100</span><span class="p">;</span><span class="w"> </span><span class="c1">// entries</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">chunkTransactionBundle</span><span class="p">(</span><span class="nx">operations</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">chunks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">operations</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">MAX_BUNDLE_SIZE</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">operations</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">MAX_BUNDLE_SIZE</span><span class="p">));</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">chunks</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">submitLargeTransaction</span><span class="p">(</span><span class="nx">operations</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">chunks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">chunkTransactionBundle</span><span class="p">(</span><span class="nx">operations</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>

<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="nx">chunk</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">chunks</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">bundle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">createTransactionBundle</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="s2">"/"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">,</span>
<span class="w">      </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">bundle</span><span class="p">)</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">    </span><span class="nx">results</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">extractTransactionResults</span><span class="p">(</span><span class="nx">response</span><span class="p">));</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">results</span><span class="p">.</span><span class="nx">flat</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<hr/>
<h3 id="pattern-5-resolving-references-within-bundles">Pattern 5: Resolving References Within Bundles</h3>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">resolveReferences</span><span class="p">(</span><span class="nx">bundle</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Build index of resources by fullUrl</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">resourceMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Map</span><span class="p">();</span>
<span class="w">  </span><span class="nx">bundle</span><span class="p">.</span><span class="nx">entry</span><span class="o">?</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">entry</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">entry</span><span class="p">.</span><span class="nx">fullUrl</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">resource</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">resourceMap</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">entry</span><span class="p">.</span><span class="nx">fullUrl</span><span class="p">,</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">resource</span><span class="p">);</span>

<span class="w">      </span><span class="c1">// Also index by resource type/id for relative references</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">resource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">resource</span><span class="p">;</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">resource</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">resourceMap</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">resource</span><span class="p">.</span><span class="nx">resourceType</span><span class="si">}</span><span class="sb">/</span><span class="si">${</span><span class="nx">resource</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span><span class="w"> </span><span class="nx">resource</span><span class="p">);</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="c1">// Helper function to resolve a reference</span>
<span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">resolve</span><span class="p">(</span><span class="nx">reference</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">reference</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// Try fullUrl first</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">resourceMap</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">reference</span><span class="p">.</span><span class="nx">reference</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nx">resourceMap</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">reference</span><span class="p">.</span><span class="nx">reference</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Try relative reference</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">relativeRef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">reference</span><span class="p">.</span><span class="nx">reference</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^https?:\/\/[^/]+\//</span><span class="p">,</span><span class="w"> </span><span class="s1">''</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">resourceMap</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">relativeRef</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">resolve</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Usage</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">bundle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="cm">/* ... fetch bundle ... */</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">resolve</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">resolveReferences</span><span class="p">(</span><span class="nx">bundle</span><span class="p">);</span>

<span class="nx">bundle</span><span class="p">.</span><span class="nx">entry</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">entry</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">resource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">entry</span><span class="p">.</span><span class="nx">resource</span><span class="p">;</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">resource</span><span class="p">.</span><span class="nx">resourceType</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">"Observation"</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">resource</span><span class="p">.</span><span class="nx">subject</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">patient</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">resolve</span><span class="p">(</span><span class="nx">resource</span><span class="p">.</span><span class="nx">subject</span><span class="p">);</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Observation for patient: </span><span class="si">${</span><span class="nx">patient</span><span class="o">?</span><span class="p">.</span><span class="nx">name</span><span class="o">?</span><span class="p">.[</span><span class="mf">0</span><span class="p">]</span><span class="o">?</span><span class="p">.</span><span class="nx">family</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<hr/>
<h2 id="bundle-validation-checklist">Bundle Validation Checklist</h2>
<p>Before submitting bundles:</p>
<p><strong>All bundles</strong>:</p>
<ul>
<li>[ ] <code>resourceType: "Bundle"</code> present</li>
<li>[ ] <code>type</code> is one of: searchset, transaction, batch, document, message</li>
<li>[ ] <code>entry</code> is array (or omitted if empty)</li>
</ul>
<p><strong>Transaction bundles</strong>:</p>
<ul>
<li>[ ] Each entry has <code>request</code> object</li>
<li>[ ] <code>request.method</code> is valid HTTP verb</li>
<li>[ ] <code>request.url</code> is valid resource path</li>
<li>[ ] Temporary references use <code>urn:uuid:</code> format</li>
<li>[ ] No circular dependencies in temp references</li>
</ul>
<p><strong>Document bundles</strong>:</p>
<ul>
<li>[ ] First entry is Composition</li>
<li>[ ] All Composition references resolved within bundle</li>
<li>[ ] <code>timestamp</code> present</li>
<li>[ ] Optional: <code>identifier</code> for document tracking</li>
</ul>
<p><strong>Message bundles</strong>:</p>
<ul>
<li>[ ] First entry is MessageHeader</li>
<li>[ ] <code>eventCoding</code> or <code>eventUri</code> present</li>
<li>[ ] <code>source.endpoint</code> defined</li>
<li>[ ] At least one <code>destination</code> (unless broadcast)</li>
</ul>
<hr/>
<h2 id="common-bundle-errors">Common Bundle Errors</h2>
<h3 id="error-1-wrong-bundle-type">Error 1: Wrong Bundle Type</h3>
<p><strong>Symptom</strong>: Server rejects bundle with "Bundle type mismatch"</p>
<p><strong>Cause</strong>: Submitted <code>type: "searchset"</code> to transaction endpoint</p>
<p><strong>Fix</strong>: Use correct type for operation:</p>
<ul>
<li>POST with create/update → <code>type: "transaction"</code> or <code>type: "batch"</code></li>
<li>GET response → <code>type: "searchset"</code> (server sets this)</li>
</ul>
<hr/>
<h3 id="error-2-unresolved-temporary-reference">Error 2: Unresolved Temporary Reference</h3>
<p><strong>Symptom</strong>: "Reference urn:uuid:abc123 not found in bundle"</p>
<p><strong>Cause</strong>: Observation references <code>urn:uuid:patient-1</code>, but no entry has that <code>fullUrl</code></p>
<p><strong>Fix</strong>: Ensure every <code>urn:uuid</code> reference has matching <code>fullUrl</code> entry:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"entry"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"fullUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"urn:uuid:patient-1"</span><span class="p">,</span><span class="w">  </span><span class="c1">// Must match reference below</span>
<span class="w">      </span><span class="nt">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="cm">/* Patient resource */</span><span class="p">},</span>
<span class="w">      </span><span class="nt">"request"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">,</span><span class="w"> </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patient"</span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Observation"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"subject"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"urn:uuid:patient-1"</span><span class="p">}</span><span class="w">  </span><span class="c1">// This UUID must exist above</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">"request"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">,</span><span class="w"> </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Observation"</span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<hr/>
<h3 id="error-3-batch-vs-transaction-confusion">Error 3: Batch vs. Transaction Confusion</h3>
<p><strong>Symptom</strong>: Transaction rolls back unexpectedly</p>
<p><strong>Cause</strong>: Used <code>type: "transaction"</code> when one entry was expected to fail</p>
<p><strong>Fix</strong>: Use <code>type: "batch"</code> if independent operations:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"batch"</span><span class="p">,</span><span class="w">  </span><span class="c1">// Failures are isolated</span>
<span class="w">  </span><span class="nt">"entry"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="nt">"request"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DELETE"</span><span class="p">,</span><span class="w"> </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Observation/might-not-exist"</span><span class="p">}},</span>
<span class="w">    </span><span class="p">{</span><span class="nt">"request"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PUT"</span><span class="p">,</span><span class="w"> </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patient/123"</span><span class="p">},</span><span class="w"> </span><span class="nt">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="cm">/*...*/</span><span class="p">}}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<hr/>
<h2 id="next-steps">Next Steps</h2>
<p>We covered:</p>
<ul>
<li>✅ How resources relate to each other (references)</li>
<li>✅ How resources are grouped and transmitted (bundles)</li>
</ul>
<p>Next, we'll explore the comprehensive relationship map showing cardinality across all major resources.</p>
<p>→ <a href="../deepdive-fhir-resource-relationships-comprehensive/">Comprehensive Resource Relationships</a></p>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: FHIR Comprehensive Resource Relationships" class="md-footer__link md-footer__link--prev" href="../deepdive-fhir-resource-relationships-comprehensive/">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</div>
<div class="md-footer__title">
<span class="md-footer__direction">
                Previous
              </span>
<div class="md-ellipsis">
                FHIR Comprehensive Resource Relationships
              </div>
</div>
</a>
<a aria-label="Next: FHIR Resource Relationships" class="md-footer__link md-footer__link--next" href="../">
<div class="md-footer__title">
<span class="md-footer__direction">
                Next
              </span>
<div class="md-ellipsis">
                FHIR Resource Relationships
              </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<div class="md-consent" data-md-component="consent" hidden="" id="__consent">
<div class="md-consent__overlay"></div>
<aside class="md-consent__inner">
<form class="md-consent__form md-grid md-typeset" name="consent">
<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.
</p>
<input class="md-toggle" id="__settings" type="checkbox"/>
<div class="md-consent__settings">
<ul class="task-list">
<li class="task-list-item">
<label class="task-list-control">
<input checked="" name="analytics" type="checkbox"/>
<span class="task-list-indicator"></span>
          Google Analytics
        </label>
</li>
</ul>
</div>
<div class="md-consent__controls">
<button class="md-button md-button--primary">Accept</button>
<label class="md-button" for="__settings">Manage settings</label>
</div>
</form>
</aside>
</div>
<script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
<script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.top", "navigation.footer", "navigation.indexes", "search.highlight", "search.suggest", "search.share", "content.code.copy", "content.code.select"], "search": "../../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../../../../assets/javascripts/bundle.525ec568.min.js"></script>
<script src="../../../../js/diagram-utils.js"></script>
<script src="../../../../js/seamaiden.js"></script>
<script src="../../../../js/diagram-theme-switcher.js"></script>
<script src="../../../../js/diagram-zoom.js"></script>
<script src="../../../../js/open_in_new_tab.js"></script>
<script src="../../../../assets/mkdocs_puml/puml.js"></script>
<script src="https://unpkg.com/@panzoom/panzoom@4.5.1/dist/panzoom.min.js"></script>
<script src="../../../../assets/mkdocs_puml/interaction.js"></script>
<script src="../../../../js/mermaid.min.js"></script><script>mermaid.initialize({});</script><script>document$.subscribe(() => {
            window.update_swagger_ui_iframe_height = function (id) {
                var iFrameID = document.getElementById(id);
                if (iFrameID) {
                    full_height = (iFrameID.contentWindow.document.body.scrollHeight + 80) + "px";
                    iFrameID.height = full_height;
                    iFrameID.style.height = full_height;
                }
            }
        
            let iframe_id_list = []
            var iframes = document.getElementsByClassName("swagger-ui-iframe");
            for (var i = 0; i < iframes.length; i++) { 
                iframe_id_list.push(iframes[i].getAttribute("id"))
            }
        
            let ticking = true;
            
            document.addEventListener('scroll', function(e) {
                if (!ticking) {
                    window.requestAnimationFrame(()=> {
                        let half_vh = window.innerHeight/2;
                        for(var i = 0; i < iframe_id_list.length; i++) {
                            let element = document.getElementById(iframe_id_list[i])
                            if(element==null){
                                return
                            }
                            let diff = element.getBoundingClientRect().top
                            if(element.contentWindow.update_top_val){
                                element.contentWindow.update_top_val(half_vh - diff)
                            }
                        }
                        ticking = false;
                    });
                    ticking = true;
                }
            });
        
            const dark_scheme_name = "slate"
            
            window.scheme = document.body.getAttribute("data-md-color-scheme")
            const options = {
                attributeFilter: ['data-md-color-scheme'],
            };
            function color_scheme_callback(mutations) {
                for (let mutation of mutations) {
                    if (mutation.attributeName === "data-md-color-scheme") {
                        scheme = document.body.getAttribute("data-md-color-scheme")
                        var iframe_list = document.getElementsByClassName("swagger-ui-iframe")
                        for(var i = 0; i < iframe_list.length; i++) {
                            var ele = iframe_list.item(i);
                            if (ele) {
                                if (scheme === dark_scheme_name) {
                                    ele.contentWindow.enable_dark_mode();
                                } else {
                                    ele.contentWindow.disable_dark_mode();
                                }
                            }
                        }
                    }
                }
            }
            observer = new MutationObserver(color_scheme_callback);
            observer.observe(document.body, options);
            })</script></body>
</html>